<!doctype html><html class="antialiased scroll-smooth scroll-pt-14" lang=vi><meta charset=utf-8><title>Lập trình web với Cherrypy và Jinja2 | manhhomienbienthuy</title><meta content="width=device-width,initial-scale=1" name=viewport><link href=https://manhhomienbienthuy.github.io/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=https://manhhomienbienthuy.github.io/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=https://manhhomienbienthuy.github.io/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=https://manhhomienbienthuy.github.io/site.webmanifest rel=manifest><link color=#5bbad5 href=https://manhhomienbienthuy.github.io/safari-pinned-tab.svg rel=mask-icon><meta content=#da532c name=msapplication-TileColor><meta content=#ffffff name=theme-color><link href=https://manhhomienbienthuy.github.io/2015/08/30/lap-trinh-web-voi-cherrypy-va-jinja2.html rel=canonical><meta content=https://manhhomienbienthuy.github.io/icon-tile.png name=msapplication-TileImage><meta content=on name=twitter:dnt><meta content=manhhomienbienthuy name=Author><meta content=general name=rating><meta content=product name=twitter:card><meta content=@_naa_4f name=twitter:site><meta content=@_naa_4f name=twitter:creator><link title="manhhomienbienthuy Full RSS Feed" href=https://manhhomienbienthuy.github.io/feeds/rss.xml rel=alternate type=application/rss+xml><link title="manhhomienbienthuy Full Atom Feed" href=https://manhhomienbienthuy.github.io/feeds/atom.xml rel=alternate type=application/atom+xml><meta content="Trong bài viết này, tôi sẽ giới thiệu một framework để phát triển Web – CherryPy – một framework được viết cho Python. Tôi sẽ không đi sâu vào phân tích và so sánh với các framework khác và các ngôn ngữ khác và tại sao bạn nên sử dụng framework này […]" name=description><meta content="Lập trình web với Cherrypy và Jinja2 | manhhomienbienthuy" name=twitter:title><meta content="Trong bài viết này, tôi sẽ giới thiệu một framework để phát triển Web – CherryPy – một framework được viết cho Python. Tôi sẽ không đi sâu vào phân tích và so sánh với các framework khác và các ngôn ngữ khác và tại sao bạn nên sử dụng framework này […]" name=twitter:description><meta content="https://images.unsplash.com/photo-1587620962725-abab7fe55159?ixlib=rb-4.0.3&w=1280&q=80&fm=webp&crop=entropy&cs=tinysrgb" name=twitter:image><link href=https://manhhomienbienthuy.github.io/theme/css/syntax.css rel=stylesheet><link href=https://manhhomienbienthuy.github.io/theme/css/app.css rel=stylesheet><script>document.documentElement.classList.toggle(`dark`,localStorage.theme===`dark`||!(`theme` in localStorage)&&window.matchMedia(`(prefers-color-scheme: dark)`).matches)</script><body class="text-slate-600 bg-slate-100 dark:bg-slate-700 dark:text-slate-300"><header class=mb-8><div class="fixed z-50 top-0 left-0 right-0 text-white bg-slate-900"><div class="relative flex flex-wrap justify-between items-center gap-x-4 container mx-auto px-4"><a class="my-2.5 rounded-full" href=https://manhhomienbienthuy.github.io> <img class="size-5 rounded-full" alt=manhhomienbienthuy height=20 src=https://manhhomienbienthuy.github.io/meow.webp width=20> </a><input class="hidden peer" id=menu-toggle type=checkbox><label class="grow flex items-center gap-x-0.5 md:hidden text-xs cursor-pointer" for=menu-toggle><svg viewbox="0 0 24 24" class=size-5 fill=none stroke=currentColor xmlns=http://www.w3.org/2000/svg><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap=round stroke-linejoin=round stroke-width=2 /></svg> <span class=uppercase>Menu</span></label><nav class="hidden peer-checked:block md:block grow order-last md:order-none w-full md:w-auto text-xs uppercase bg-slate-900 divide-y md:divide-y-0"><a class="block md:inline p-4" href=https://manhhomienbienthuy.github.io> Trang chủ </a><a class="block md:inline p-4" href=https://manhhomienbienthuy.github.io/category/cuoc-song.html> Cuộc sống </a><a class="block md:inline p-4" href=https://manhhomienbienthuy.github.io/category/du-lich.html> Du lịch </a><a class="block md:inline p-4" href=https://manhhomienbienthuy.github.io/category/lap-trinh.html> Lập trình </a><a class="block md:inline p-4" href=https://manhhomienbienthuy.github.io/category/tong-hop.html> Tổng hợp </a></nav><div><input class="hidden peer" id=theme-toggle type=checkbox><label class="size-5 text-slate-400 dark:text-slate-500 cursor-pointer" for=theme-toggle><span class=dark:hidden> <svg viewbox="0 0 24 24" class=size-5 fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/><path d="M12 4v1M17.66 6.344l-.828.828M20.005 12.004h-1M17.66 17.664l-.828-.828M12 20.01V19M6.34 17.664l.835-.836M3.995 12.004h1.01M6 6l.835.836"/></svg> </span> <span class="hidden dark:inline"> <svg viewbox="0 0 24 24" class=size-5 fill=currentColor><path d="m17.715 15.15.95.316a1 1 0 0 0-1.445-1.185l.495.869ZM9 6.035l.846.534a1 1 0 0 0-1.14-1.49L9 6.035Zm8.221 8.246a5.47 5.47 0 0 1-2.72.718v2a7.47 7.47 0 0 0 3.71-.98l-.99-1.738Zm-2.72.718A5.5 5.5 0 0 1 9 9.5H7a7.5 7.5 0 0 0 7.5 7.5v-2ZM9 9.5c0-1.079.31-2.082.845-2.93L8.153 5.5A7.47 7.47 0 0 0 7 9.5h2Zm-4 3.368C5 10.089 6.815 7.75 9.292 6.99L8.706 5.08C5.397 6.094 3 9.201 3 12.867h2Zm6.042 6.136C7.718 19.003 5 16.268 5 12.867H3c0 4.48 3.588 8.136 8.042 8.136v-2Zm5.725-4.17c-.81 2.433-3.074 4.17-5.725 4.17v2c3.552 0 6.553-2.327 7.622-5.537l-1.897-.632Z"/><path d="M17 3a1 1 0 0 1 1 1 2 2 0 0 0 2 2 1 1 0 1 1 0 2 2 2 0 0 0-2 2 1 1 0 1 1-2 0 2 2 0 0 0-2-2 1 1 0 1 1 0-2 2 2 0 0 0 2-2 1 1 0 0 1 1-1Z" clip-rule=evenodd fill-rule=evenodd /></svg> </span></label><ul class="hidden peer-checked:block absolute z-50 top-full right-2 w-36 mt-2 py-1 text-sm font-semibold bg-slate-100 dark:bg-slate-900 text-slate-400 dark:text-slate-500 rounded-lg shadow-lg overflow-hidden cursor-pointer"><li class="py-1 px-2 flex items-center" data-mode=light><svg class="size-6 mr-2" viewbox="0 0 24 24" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/><path d="M12 4v1M17.66 6.344l-.828.828M20.005 12.004h-1M17.66 17.664l-.828-.828M12 20.01V19M6.34 17.664l.835-.836M3.995 12.004h1.01M6 6l.835.836"/></svg> Light<li class="py-1 px-2 flex items-center cursor-pointer" data-mode=dark><svg class="size-6 mr-2" viewbox="0 0 24 24" fill=currentColor><path d="m17.715 15.15.95.316a1 1 0 0 0-1.445-1.185l.495.869ZM9 6.035l.846.534a1 1 0 0 0-1.14-1.49L9 6.035Zm8.221 8.246a5.47 5.47 0 0 1-2.72.718v2a7.47 7.47 0 0 0 3.71-.98l-.99-1.738Zm-2.72.718A5.5 5.5 0 0 1 9 9.5H7a7.5 7.5 0 0 0 7.5 7.5v-2ZM9 9.5c0-1.079.31-2.082.845-2.93L8.153 5.5A7.47 7.47 0 0 0 7 9.5h2Zm-4 3.368C5 10.089 6.815 7.75 9.292 6.99L8.706 5.08C5.397 6.094 3 9.201 3 12.867h2Zm6.042 6.136C7.718 19.003 5 16.268 5 12.867H3c0 4.48 3.588 8.136 8.042 8.136v-2Zm5.725-4.17c-.81 2.433-3.074 4.17-5.725 4.17v2c3.552 0 6.553-2.327 7.622-5.537l-1.897-.632Z"/><path d="M17 3a1 1 0 0 1 1 1 2 2 0 0 0 2 2 1 1 0 1 1 0 2 2 2 0 0 0-2 2 1 1 0 1 1-2 0 2 2 0 0 0-2-2 1 1 0 1 1 0-2 2 2 0 0 0 2-2 1 1 0 0 1 1-1Z" clip-rule=evenodd fill-rule=evenodd /></svg> Dark<li class="py-1 px-2 flex items-center cursor-pointer text-sky-500" data-mode=system><svg class="size-6 mr-2 text-slate-400 dark:text-slate-500" viewbox="0 0 24 24" fill=none stroke=currentColor stroke-width=2 xmlns=http://www.w3.org/2000/svg><path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" stroke-linecap=round stroke-linejoin=round /><path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" stroke-linecap=round stroke-linejoin=round /></svg> System</ul></div></div></div><div class="pt-10 md:pt-12 bg-white shadow-sm dark:bg-slate-800 dark:text-slate-100"><div class="flex justify-center container mx-auto px-6 py-4"><a href=https://manhhomienbienthuy.github.io title=manhhomienbienthuy> <svg class="max-w-full max-h-24 w-auto h-auto text-slate-900 dark:text-slate-100" viewbox="0 0 1000 165" fill=currentColor height=165 version=1.0 width=1000 xmlns=http://www.w3.org/2000/svg><path d="M651.5 14.7c-10.4 1-11.6 1.4-11 3.3.9 2.9-1.2 7-17.6 34.2-8.4 13.9-17.6 30.2-20.4 36.3-3.5 7.4-6.7 12.4-9.6 15.4-6.1 6.1-13.9 9.2-13.9 5.6 0-2.6 4.7-11 12.7-22.8C600.3 74 602 70.5 602 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C500.2 71 505.5 60.6 504.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.2-3.6 4.8-2 6.7-19.5 35.4-25 41.1-5.1 5.1-8.7 6.6-9.8 3.8-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8c13.2-20.9 20.3-29.9 25.2-31.7 7-2.7 5.7 3-5 21-7.7 12.9-11.6 21.6-11.6 25.8 0 2 5.5 7.2 7.7 7.2 3.9 0 9.5-2.2 13.8-5.5 2.5-1.9 4.7-3.5 5-3.5s.5 1.3.5 2.8c0 1.7 1 3.8 2.5 5.2 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-5 7.7-10 15.9-11.2 18.2-2.7 5.4-2.9 11.8-.4 14.6 4.4 4.8 16.5 1.1 25.6-8l4.8-4.8.6 3.8c1.3 8.3 8.3 12.4 17.3 10.2 18.5-4.6 39.3-28 39.3-44.3 0-14-8.6-18.8-20-11.1-5.5 3.7-5.5 3.7-3.6.8 5.6-8.5 23.6-41 24.1-43.6.8-3.7 0-4.6-4-4.2zM542.6 62.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zm101 3c1.9 7.8-15.7 39.6-25.6 46.3-2.2 1.4-4.6 2.2-6.5 2-2.6-.3-3-.7-3.3-3.6-.8-8.1 8.8-27.5 19.7-39.5 7-7.8 14.4-10.2 15.7-5.2zM821 16c-1.1 1.1-2 2.7-2 3.5 0 2.1-5.3 12.5-9.7 19.2l-3.6 5.3h-5.8c-5.6 0-5.9.1-5.9 2.4 0 2.2.5 2.5 4.4 2.8l4.4.3-11 18c-6 9.9-13 22-15.4 27-4.7 9.9-7.3 13-12.1 15.1-4.2 1.8-6.3 1.8-6.3-.1 0-2.6 4.7-11 12.7-22.8C779.3 74 781 70.5 781 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C679.2 71 684.5 60.6 683.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.3-3.6 4.9-.7 2.2-4.9 10-9.3 17.3-10.4 17-12.9 22.7-12.9 28.8 0 3.8.5 5.2 2.5 7.1 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 10.4 11 11.4 23.4 2l3.5-2.7.8 3c2.1 8.2 12.3 8.2 22.8 0 4.4-3.5 5.6-3.7 3.5-.7-3.1 4.4-2.2 5.8 3.7 5.8 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-9.8 15.5-12.8 21.7-12.8 26.5 0 4.4 3.3 7.9 7.6 7.9 4.5 0 12.6-4.5 18.6-10.3l5.4-5.2-.4 5.2c-.5 6.3 1.3 9.8 5.7 10.8s9.5-1.7 17.1-9.1l6.9-6.6-.2 5.5c-.2 4.2.3 6 1.7 7.6 2.8 3.1 8.3 2.8 13.2-.7l3.9-2.8 2 3c1.1 1.6 3.1 3.3 4.5 3.6 3.8 1 11.1-1.5 15.8-5.5 2.3-2 4.2-3.4 4.2-3.1 0 1.2-10.4 19.3-13.5 23.6-4.7 6.4-14.3 15.4-19.3 17.9-4.7 2.4-10.9 2.7-13.7.8-1.6-1.2-1.6-1.8-.7-4.7 1.6-4.4 1.5-5.6-.4-7.4-3.8-3.8-10.4.2-10.4 6.3 0 11 18.9 13.3 36.9 4.5 11.2-5.5 20.6-15.4 29.7-31.4 3.9-6.9 10.6-18.4 14.9-25.5 16.8-28.2 19.1-32.6 18-34.5-.4-.6-3.5-1-7.1-1-5.3 0-6.6.3-7 1.7-.8 2.9-12.5 25.4-16.1 31.2-6.9 10.8-18.9 21.2-22.8 19.7-2.8-1 1.4-11 11-26.7 7.3-11.8 12.7-22.8 12.1-24.5-.6-1.5-4.4-1.8-9.5-.8-2.7.6-3.6 1.5-5.5 5.8-1.3 2.8-5.8 10.6-10 17.4-7.7 12.2-12.6 21.5-12.6 23.9 0 1.7-4.6 4.6-6 3.8-3.2-2 .2-11 10.4-27.8 7.7-12.8 11.5-20.1 11.6-22.5 0-.8-1.4-1.2-4.2-1.1-9.3.3-9.7.6-13.8 10.2-6.6 15.4-24.1 39.3-30.4 41.7-2.9 1-4.6.2-4.6-2.4 0-1.2 3.9-8.7 8.6-16.7C900 63.4 901.8 58 894.5 58c-6.7 0-9.5 1.1-10 3.9-2.4 12.1-24.9 42.1-34.6 46.1-7.4 3.1-5.5-3.2 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-1-1.2-2.4-1.5-6.1-1-6.7.9-7.5 1.4-8.3 4.4-.3 1.5-2.3 5.6-4.5 9.2-2.1 3.6-7.5 13-12 21-28.3 50.1-35.9 60.5-43.8 59.8-5-.4-5.2-2.6-1.2-12.1 3.3-8.1 16.2-30.6 24.2-42.5l4.9-7.2h5.4c5.2 0 5.5-.1 5.5-2.5 0-2.3-.4-2.5-4-2.5-2.2 0-4-.2-4-.6 0-.3 1.8-3.2 4-6.4 5-7.4 11-18.9 11-21.3 0-2.7-12.2-2.5-15 .3zm-99.4 46.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zM271.5 16.5c-.5.2-2.2.6-3.7.9-1.6.4-2.8 1.2-2.8 1.9 0 1.7-2.4 6.2-12.9 24.7-18.8 33.1-33.6 57.7-36.5 60.9-4.7 5.1-12.6 8-12.6 4.6 0-2.6 4.7-11 12.7-22.8C224.3 74 226 70.5 226 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 5.5-20.8 38.1-29.4 46-4.8 4.4-7 5.2-7.9 2.8-1-2.5 1-7.5 7.2-18 8.4-14.3 18.1-31.8 18.1-32.8 0-.4-2.9-.8-6.5-.8s-6.5.4-6.5.8c0 .5-.6 1.6-1.3 2.6-1.3 1.8-1.5 1.7-4.1-.9-2.4-2.4-3.4-2.7-7-2.3-13.6 1.6-31.1 16.8-39.7 34.5-5.8 11.8-16.5 21-18.5 15.9-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8C79.6 74.8 86.7 65.8 91.6 64c7-2.7 5.7 3-5 21C78.9 97.9 75 106.6 75 110.8c0 .7 1.4 2.7 3 4.4 2.8 2.7 3.5 3 7.1 2.4 5.4-.9 9.2-2.9 14.4-7.7l4.3-3.9.7 3.6c.3 2.1 2 5 3.6 6.7 2.5 2.5 3.6 2.9 6.4 2.4 3.8-.6 9.8-4.5 16.4-10.6 2.4-2.3 4.5-4.1 4.7-4.1s.4 2.2.4 5c0 6.2 2.7 9.6 6.8 8.5 3.5-.9 8.2-3.1 11.1-5.2 2.4-1.7 2.4-1.7 1.3.4-2.1 3.8-1.5 4.3 5.1 4.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 8.3 7.1 10.9 16.7 6 4.4-2.2 4.7-2.2 4.7-.5 0 1.6.8 1.9 5.3 1.9 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.4 21.3-15.4 27.6-10.3 32.4 4.2 3.9 12 1.6 22.4-6.7l3.5-2.8-2.7 4c-4.2 6.2-3.7 7.5 2.6 7.5 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.3 21.1-15.4 27.6-10.5 32.2 4.5 4.3 12 2 22.5-6.7 5.6-4.7 6.2-5 6.2-2.9 0 3.7 3.4 8.3 7.6 10.3 14.4 7 36.7-6.2 47.5-28 4-8 4.4-9.5 4.4-16.1 0-6.3-.3-7.6-2.4-9.8-8.4-8.9-26.6-4-42.2 11.5-6.3 6.2-8.5 9.2-12.2 17-3.4 7.1-5.7 10.3-9.1 13.1-5.7 4.8-9.3 6.5-10.7 5.1-1.6-1.6 1.6-8.1 10.1-20.8 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-2-2.4-13.9-.7-13.9 2S293.2 74.5 284 88c-5 7.3-16 18.3-20.1 20-7.4 3.1-5.6-3.1 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13-21.5 16.4-28.5 14.8-30.5-1.1-1.4-4.9-1.9-7.5-1zM151.8 62.2c3.2 3.2-.1 12.6-10.1 28.1-8.9 13.8-16.1 20.7-21.6 20.7-2.7 0-4.4-3.4-3.5-7.3 2.3-11.1 21.5-37.5 29.9-41.3 3.7-1.7 3.8-1.7 5.3-.2zm232 0c3.5 3.5-1 17.8-9.8 31.1-10.1 15.4-20.3 22.2-25.5 17-6.8-6.7 12.9-39 29-47.6 3.7-2 4.7-2.1 6.3-.5z"/><path d="M505.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8zM684.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8z"/></svg> </a></div></div></header><main><div class="grid grid-cols-1 md:grid-cols-7 items-start gap-6 container mx-auto px-6"><div class=md:col-span-5><div class="bg-white p-8 shadow-lg dark:bg-slate-800"><h1 class="mb-4 text-3xl leading-relaxed font-bold text-slate-900 uppercase dark:text-slate-100 after:block after:h-px after:w-8 after:mb-4 after:bg-slate-900 after:shadow-heading dark:after:bg-slate-100 dark:after:shadow-heading-dark">Lập trình web với Cherrypy và Jinja2</h1><div class="flex flex-wrap gap-x-4 mb-4 py-2 text-sm leading-relaxed text-slate-400"><div><svg class="inline size-4" viewbox="0 2 24 24" fill=none stroke=currentColor stroke-width=2 xmlns=http://www.w3.org/2000/svg><path d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" stroke-linecap=round stroke-linejoin=round /></svg><a href=https://manhhomienbienthuy.github.io/category/lap-trinh.html> Lập trình </a></div><div><svg class="inline size-4" viewbox="0 2 24 24" fill=none stroke=currentColor stroke-width=2 xmlns=http://www.w3.org/2000/svg><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap=round stroke-linejoin=round /></svg><a href=https://manhhomienbienthuy.github.io/2015> 2015-08-30 </a></div><div><svg class="inline size-4" viewbox="0 2 24 24" fill=none stroke=currentColor stroke-width=2 xmlns=http://www.w3.org/2000/svg><path d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap=round stroke-linejoin=round /></svg><a href=https://manhhomienbienthuy.github.io/pages/gioi-thieu.html> manhhomienbienthuy </a></div><div><svg class="inline size-4" viewbox="0 2 24 24" fill=none stroke=currentColor stroke-width=2 xmlns=http://www.w3.org/2000/svg><path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" stroke-linecap=round stroke-linejoin=round /></svg> 2023-04-26 05:26:18 (UTC)</div></div><figure class=mb-10><img alt="Lập trình web với Cherrypy và Jinja2" class="w-full mb-4" src="https://images.unsplash.com/photo-1587620962725-abab7fe55159?ixlib=rb-4.0.3&w=1280&q=80&fm=webp&crop=entropy&cs=tinysrgb" decoding=async height=270 loading=lazy width=360><figcaption class="pb-2 text-sm text-slate-400 border-b border-slate-100 dark:border-slate-700">Photo by <a class="text-crimson hover:text-slate-400" rel="noopener noreferrer" href=https://unsplash.com/@jstrippa target=_blank>James Harrison</a> from <a class="text-crimson hover:text-slate-400" rel="noopener noreferrer" href=https://unsplash.com/photos/vpOeXr5wmR4 target=_blank>Unsplash</a></figcaption></figure><div class="md:text-lg leading-loose md:leading-loose text-justify"><p class=my-4>Trong bài viết này, tôi sẽ giới thiệu một framework để phát triển Web – CherryPy – một framework được viết cho Python. Tôi sẽ không đi sâu vào phân tích và so sánh với các framework khác và các ngôn ngữ khác và tại sao bạn nên sử dụng framework này. Bởi vì mỗi framework đều có những điểm mạnh điểm yếu riêng, không có framework nào là hoàn hảo cả. Mục đích lớn nhất của bài viết là học hỏi và giới thiệu một framework mới, từ đó chúng ta có thêm nhiều lựa chọn hơn khi muốn phát triển Web. Và tất nhiên, tùy vào mục đích của trang Web mà bọn có thể chọn được framework thích hợp nhất cho mình.<div class="p-2 text-xs leading-relaxed bg-slate-100 whitespace-nowrap overflow-auto dark:bg-slate-900"><span class="font-semibold text-sm text-slate-900 mb-4 dark:text-slate-100">Mục lục</span><ul><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#gioi-thieu-cherrypy-va-jinja2>Giới thiệu CherryPy và Jinja2</a><ul class=ml-5><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#cherrypy>CherryPy</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#jinja2>Jinja2</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#cai-at>Cài đặt</a></ul><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#phat-trien-web>Phát triển Web</a><ul class=ml-5><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#cau-truc-file-va-thu-muc>Cấu trúc file và thư mục</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#cac-file-tinh-css-javascript>Các file tĩnh (CSS, JavaScript,…)</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#khoi-tao-app>Khởi tạo app</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#viet-app>Viết app</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#thao-tac-voi-json>Thao tác với JSON</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#i18n-cho-jinja2>I18n cho Jinja2</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#authentication>Authentication</a></ul><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#su-dung-sqlalchemy-lam-orm>Sử dụng SQLAlchemy làm ORM</a><ul class=ml-5><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#gioi-thieu-sqlalchemy>Giới thiệu SQLAlchemy</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#tai-sao-lai-dung-sqlalchemy>Tại sao lại dùng SQLALchemy</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#cai-at-vao-su-dung>Cài đặt vào sử dụng</a><ul class=ml-5><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#su-dung-sqlalchemy-lam-plugin-cho-cherrypy>Sử dụng SQLAlchemy làm plugin cho CherryPy</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#tao-model>Tạo model</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#tuong-tac-voi-database>Tương tác với database</a><ul class=ml-5><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#lay-cac-ban-ghi-tu-database>Lấy các bản ghi từ database</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#them-ban-ghi-vao-database>Thêm bản ghi vào database</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#xoa-ban-ghi-khoi-database>Xóa bản ghi khỏi database</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#update-ban-ghi-ang-co>Update bản ghi đang có</a></ul></ul></ul><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#demo>Demo</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#ket-luan>Kết luận</a><li><a class="text-crimson hover:text-slate-600 dark:hover:text-slate-300" href=#tai-lieu-tham-khao>Tài liệu tham khảo</a></ul></div><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-3xl text-slate-900 dark:text-slate-100" id=gioi-thieu-cherrypy-va-jinja2><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#gioi-thieu-cherrypy-va-jinja2> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Giới thiệu CherryPy và Jinja2</h2><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=cherrypy><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#cherrypy> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>CherryPy</h3><p class=my-4>CherryPy là một framework phát triển Web hướng đối tượng theo phong cách Pythonic. CherryPy cho phép những người phát triển xây dựng các ứng dụng Web với cách thức hoàn toàn giống như xây dựng các ứng dụng Python hướng đối tượng khác. Điều này sẽ giúp giảm kích thước mã nguồn và thời gian phát triển, nếu như bạn đã có kinh nghiệm với Python.<p class=my-4>Những thông tin về CherryPy bạn có thể tìm thấy trên trang chủ <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://cherrypy.org/ target=_blank>http://cherrypy.org/</a>, những tài liệu và nhiều thông tin khác được đưa ra ở trong <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://docs.cherrypy.org/en/latest/index.html target=_blank>http://docs.cherrypy.org/en/latest/index.html</a>. Ở những trang đó, bạn có thể thấy những ưu điểm nổi bật của CherryPy và lý do tại sao bạn nên dùng nó. Ở nội dung bài viết này, tôi sẽ không đi sâu vào phân tích những điều này.<p class=my-4>Có một đặc điểm của CherryPy khác với rất nhiều các framework khác. CherryPy được xây dựng đơn giản gọn nhẹ, và công việc của nó cũng hết sức đơn giản, đó là nhận request từ người dùng (cụ thể là các trình duyệt Web) và gửi phản hồi. CherryPy không cung cấp bất kỳ một template engine nào để xây dựng các trang HTML. Và CherryPy cũng không cung cấp bất kỳ một ORM (Object Relation Mapper) nào để tương tác với cơ sở dữ liệu. Điều đó có nghĩa là bạn có thể tự do lựa chọn bất cứ một template engine nào, và bất cứ ORM nào được viết cho Python.<p class=my-4>Có rất nhiều template engine khác nhau có thể sử dụng với CherryPy, bạn có thể tham khảo ở <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://en.wikipedia.org/wiki/CherryPy#Templating_languages target=_blank>đây</a>. Với nội dung bài viết này, tôi sẽ sử dụng Jinja2.<h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=jinja2><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#jinja2> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Jinja2</h3><p class=my-4>Jinja2 là một template engine cho Python với đầy đủ tính năng mà một template engine cần phải có với khả năng hỗ trợ Unicode, I18n, và cả khă năng chạy môi trường sandbox.<p class=my-4>Dưới đây là một vài tính năng nổi bật của Jinja2<ul class="list-[revert] ml-5"><li>chạy sandbox<li>Có hệ thống escape HTML mạnh mẽ để phòng chống XSS<li>Có thể kế thừa, module hóa template<li>Được xây dựng để tối ưu hóa code Python<li>Tùy chọn cho phép dịch template head-in-time<li>Dễ dàng debug.<li>Cú phát cho phép dễ dàng config</ul><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=cai-at><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#cai-at> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Cài đặt</h3><p class=my-4>Để phát triển Web, trước hết bạn phải cài đặt các package cần thiết, cụ thể ở đây là CherryPy và Jinja2. Tôi nghĩ, tốt nhất chúng ta nên thiết lập môi trường ảo cho python ở trên máy của chúng ta, điều đó sẽ giúp những cài đặt sau đây không ảnh hưởng gì đến hệ thống.<p class=my-4><strong>Lưu ý</strong>, trong bài viết này, tôi sẽ sử dụng Python 3. Với Python 2, việc cấu hình và mã nguồn sẽ khác đi một chút.<ul class="list-[revert] ml-5"><li>Khởi tạo môi trường ảo cho Python</ul><div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=gp>$ </span>pyvenv<span class=w> </span>venv
</code></pre></div><p class=my-4>Nếu bạn sử dụng Ubuntu 14.04 thì Ubuntu cài đặt sẵn một bản <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">pyvenv</code> không đầy đủ, nên bạn không thể dùng lệnh trên được. Tham khảo cách làm ở <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://askubuntu.com/questions/488529/pyvenv-3-4-error-returned-non-zero-exit-status-1 target=_blank>đây</a> để fix lỗi này.<ul class="list-[revert] ml-5"><li>Activate Python trong môi trường ảo</ul><div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=gp>$ </span><span class=nb>source</span><span class=w> </span>venv/bin/activate
</code></pre></div><ul class="list-[revert] ml-5"><li>Cài đặt các package cần thiết</ul><div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span>CheryPy
<span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span>Jinja2
</code></pre></div><p class=my-4>Vậy là đủ cho một ứng dụng Web đơn giản. Sau đây chúng ta sẽ đi vào cụ thể việc phát triển Web với CherryPy và Jinja2.<h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-3xl text-slate-900 dark:text-slate-100" id=phat-trien-web><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#phat-trien-web> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Phát triển Web</h2><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=cau-truc-file-va-thu-muc><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#cau-truc-file-va-thu-muc> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Cấu trúc file và thư mục</h3><p class=my-4>Bởi vì CherryPy được xây dựng để việc phát triển Web giống như phát triển một app Python bình thường, nên không có một quy định cụ thể nào về việc sắp xếp và tổ chức các thư mục. Tuy nhiên, tôi đã tham khảo một <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=https://bitbucket.org/Lawouach/twiseless/src target=_blank>project trên bitbucket</a> và thấy đây là một cấu trúc tốt, rất dễ hiểu. Nhiều người phát triển Web bằng CherryPy cũng tham khảo cách tổ chức này. Về cơ bản một project sẽ có các file và thư mục sau:<ul class="list-[revert] ml-5"><li><code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">conf</code>: thư mục chứa các file config của app.<li><code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">lib</code>: thư mục chứa các thư viện, tools và cả các models dùng cho app, một phần của nó giống như M trong MVC<li><code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">public</code>: thư mục chứa các tệp tĩnh như css, js, …<li><code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">template</code>: thư mục chứa các file template, nó chính là phần V trong MVC.<li><code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">webapp</code>: thư mục chưa file chính của app, nó đóng vai trò là phần C trong MVC.<li><code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">server.py</code>: file được gọi chính để khởi tạo server Web.</ul><p class=my-4>Nội dung của file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">server.py</code> như sau:<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=ch>#!/usr/bin/env python3</span>
<span class=c1># -*- coding: utf-8 -*-</span>

<span class=kn>import</span> <span class=nn>os</span>
<span class=kn>import</span> <span class=nn>cherrypy</span>
<span class=kn>import</span> <span class=nn>tempfile</span>

<span class=kn>import</span> <span class=nn>webapp.app</span>


<span class=k>class</span> <span class=nc>Server</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_set_basic_config</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_setup</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_add_app</span><span class=p>()</span>

    <span class=k>def</span> <span class=nf>_set_basic_config</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>base_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>abspath</span><span class=p>(</span><span class=vm>__file__</span><span class=p>))</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>conf_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>base_dir</span><span class=p>,</span> <span class=s2>"conf"</span><span class=p>)</span>
        <span class=n>log_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>base_dir</span><span class=p>,</span> <span class=s2>"logs"</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>log_dir</span><span class=p>):</span>
            <span class=n>os</span><span class=o>.</span><span class=n>mkdir</span><span class=p>(</span><span class=n>log_dir</span><span class=p>)</span>
        <span class=n>session_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>tempfile</span><span class=o>.</span><span class=n>gettempdir</span><span class=p>(),</span> <span class=s2>"sessions"</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>session_dir</span><span class=p>):</span>
            <span class=n>os</span><span class=o>.</span><span class=n>mkdir</span><span class=p>(</span><span class=n>session_dir</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>_setup</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># Update the global settings for the HTTP server and engine</span>
        <span class=n>cherrypy</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>conf_path</span><span class=p>,</span> <span class=s2>"server.conf"</span><span class=p>))</span>

    <span class=k>def</span> <span class=nf>_add_app</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>cherrypy</span><span class=o>.</span><span class=n>tree</span><span class=o>.</span><span class=n>mount</span><span class=p>(</span>
            <span class=n>webapp</span><span class=o>.</span><span class=n>app</span><span class=o>.</span><span class=n>Bank</span><span class=p>(),</span>
            <span class=s2>"/"</span><span class=p>,</span>
            <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>conf_path</span><span class=p>,</span> <span class=s2>"app.conf"</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=k>def</span> <span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>engine</span> <span class=o>=</span> <span class=n>cherrypy</span><span class=o>.</span><span class=n>engine</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>engine</span><span class=p>,</span> <span class=s2>"signal_handler"</span><span class=p>):</span>
            <span class=n>engine</span><span class=o>.</span><span class=n>signal_handler</span><span class=o>.</span><span class=n>subscribe</span><span class=p>()</span>

        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>engine</span><span class=p>,</span> <span class=s2>"console_control_handler"</span><span class=p>):</span>
            <span class=n>engine</span><span class=o>.</span><span class=n>console_control_handler</span><span class=o>.</span><span class=n>subscribe</span><span class=p>()</span>

        <span class=n>engine</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
        <span class=n>engine</span><span class=o>.</span><span class=n>block</span><span class=p>()</span>


<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>"__main__"</span><span class=p>:</span>
    <span class=n>Server</span><span class=p>()</span><span class=o>.</span><span class=n>run</span><span class=p>()</span>
</code></pre></div><p class=my-4><code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">server.py</code> sẽ là file chính được gọi khi khởi tạo server Web. Nhiệm vụ của nó là khởi tạo các cấu hình cần thiết của hệ thống để app có thể chạy được. Cụ thể trong trường hợp trên là khởi tạo các thư mục lưu sessions, logs, gọi các app. Các giá trị khởi tạo này hoàn toàn có thể cấu hình được. Và các file cấu hình được lưu trong thư mục <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">conf</code>. Trong ví dụ này, tôi lưu 2 file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">server.conf</code> để lưu cấu hình hệ thống và <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">app.conf</code> để lưu các cấu hình riêng cho app.<p class=my-4>Nội dung file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">server.conf</code> như sau:<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=p>[</span><span class=k>global</span><span class=p>]</span>
<span class=n>server</span><span class=o>.</span><span class=n>socket_host</span><span class=p>:</span> <span class=s2>"0.0.0.0"</span>
<span class=n>server</span><span class=o>.</span><span class=n>socket_port</span><span class=p>:</span> <span class=mi>8080</span>
<span class=n>server</span><span class=o>.</span><span class=n>thread_pool</span><span class=p>:</span> <span class=mi>10</span>
<span class=n>engine</span><span class=o>.</span><span class=n>autoreload</span><span class=o>.</span><span class=n>on</span><span class=p>:</span> <span class=kc>False</span>
<span class=n>log</span><span class=o>.</span><span class=n>error_file</span><span class=p>:</span> <span class=s2>"./logs/error.log"</span>
<span class=n>log</span><span class=o>.</span><span class=n>access_file</span><span class=p>:</span> <span class=s2>"./logs/access.log"</span>
</code></pre></div><p class=my-4>File config này được viết theo cú pháp của CherryPy, bạn có thể tham khảo cú pháp đó trong trong Web của CherryPy. Ở đây, tôi đã cấu hình một vài thông số cơ bản như Web server sẽ chạy ở cổng <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">8080</code> và các giá trị về thread pool, các file log, …<p class=my-4>Dưới đây là nội dung file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">app.conf</code><div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=p>[</span><span class=o>/</span><span class=p>]</span>
<span class=n>tools</span><span class=o>.</span><span class=n>staticdir</span><span class=o>.</span><span class=n>root</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>abspath</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>curdir</span><span class=p>))</span>
<span class=n>tools</span><span class=o>.</span><span class=n>staticfile</span><span class=o>.</span><span class=n>root</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>abspath</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>curdir</span><span class=p>))</span>
<span class=n>tools</span><span class=o>.</span><span class=n>encode</span><span class=o>.</span><span class=n>on</span><span class=p>:</span> <span class=kc>True</span>
<span class=n>tools</span><span class=o>.</span><span class=n>gzip</span><span class=o>.</span><span class=n>on</span><span class=p>:</span> <span class=kc>True</span>
<span class=n>tools</span><span class=o>.</span><span class=n>gzip</span><span class=o>.</span><span class=n>mime_types</span><span class=p>:</span> <span class=p>[</span><span class=s1>'text/html'</span><span class=p>,</span> <span class=s1>'text/plain'</span><span class=p>,</span> <span class=s1>'application/json'</span><span class=p>,</span> <span class=s1>'text/javascript'</span><span class=p>,</span> <span class=s1>'application/javascript'</span><span class=p>]</span>
<span class=n>tools</span><span class=o>.</span><span class=n>sessions</span><span class=o>.</span><span class=n>on</span><span class=p>:</span> <span class=kc>True</span>
<span class=n>tools</span><span class=o>.</span><span class=n>sessions</span><span class=o>.</span><span class=n>timeout</span><span class=p>:</span> <span class=mi>60</span>
<span class=n>tools</span><span class=o>.</span><span class=n>sessions</span><span class=o>.</span><span class=n>storage_type</span><span class=p>:</span> <span class=s2>"file"</span>
<span class=n>tools</span><span class=o>.</span><span class=n>sessions</span><span class=o>.</span><span class=n>storage_path</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>tempfile</span><span class=o>.</span><span class=n>gettempdir</span><span class=p>(),</span> <span class=s2>"sessions"</span><span class=p>)</span>

<span class=p>[</span><span class=o>/</span><span class=n>static</span><span class=p>]</span>
<span class=n>tools</span><span class=o>.</span><span class=n>etags</span><span class=o>.</span><span class=n>on</span><span class=p>:</span> <span class=kc>True</span>
<span class=n>tools</span><span class=o>.</span><span class=n>staticdir</span><span class=o>.</span><span class=n>on</span><span class=p>:</span> <span class=kc>True</span>
<span class=n>tools</span><span class=o>.</span><span class=n>staticdir</span><span class=o>.</span><span class=n>dir</span><span class=p>:</span> <span class=s2>"public"</span>
</code></pre></div><p class=my-4>Những nội dung cụ thể của file này, tôi sẽ lần lượt giới thiệu sau đây.<h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=cac-file-tinh-css-javascript><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#cac-file-tinh-css-javascript> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Các file tĩnh (CSS, JavaScript,…)</h3><p class=my-4>Các file CSS, JavaScript, và file ảnh, … là các file tĩnh với một ứng dụng Web. Nó sẽ được load cùng với trang Web và không thay đổi nội dung trong suốt quá trình thao tác với trang Web đó. CherryPy cung cấp công cụ riêng để load các file này. Với ví dụ của chúng ta, các file tĩnh đặt trong thư mục <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">public</code>, và tôi muốn CherryPy sẽ load các file này với path tương tự như <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">/static/app.js</code>. Để làm được điều này, chỉ cần cấu hình trong file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">app.conf</code> là đủ:<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=p>[</span><span class=o>/</span><span class=p>]</span>
<span class=n>tools</span><span class=o>.</span><span class=n>staticdir</span><span class=o>.</span><span class=n>root</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>abspath</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>curdir</span><span class=p>))</span>
<span class=n>tools</span><span class=o>.</span><span class=n>staticfile</span><span class=o>.</span><span class=n>root</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>abspath</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>curdir</span><span class=p>))</span>

<span class=p>[</span><span class=o>/</span><span class=n>static</span><span class=p>]</span>
<span class=n>tools</span><span class=o>.</span><span class=n>etags</span><span class=o>.</span><span class=n>on</span><span class=p>:</span> <span class=kc>True</span>
<span class=n>tools</span><span class=o>.</span><span class=n>staticdir</span><span class=o>.</span><span class=n>on</span><span class=p>:</span> <span class=kc>True</span>
<span class=n>tools</span><span class=o>.</span><span class=n>staticdir</span><span class=o>.</span><span class=n>dir</span><span class=p>:</span> <span class=s2>"public"</span>
</code></pre></div><p class=my-4>Với cấu hình trên, mỗi khi Web server muốn load một file tĩnh, ví dụ <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">/static/app.js</code> thì CherryPy sẽ tìm file tương ứng là <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">public/app.js</code> để load ra. Tương tự với các file CSS và file ảnh.<h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=khoi-tao-app><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#khoi-tao-app> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Khởi tạo app</h3><p class=my-4>Trong ví dụ của tôi, app controller sẽ được lập trình trong file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">webapp/app.py</code>. Trước hết, cần khởi tạo app với việc import các package cần thiết và khởi tạo template engine<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=c1># -*- coding: utf-8 -*-</span>

<span class=kn>import</span> <span class=nn>cherrypy</span>
<span class=kn>import</span> <span class=nn>jinja2</span>

<span class=n>__all__</span> <span class=o>=</span> <span class=p>[</span><span class=s2>"Bank"</span><span class=p>]</span>


<span class=k>class</span> <span class=nc>Bank</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>_tmp_loader</span> <span class=o>=</span> <span class=n>jinja2</span><span class=o>.</span><span class=n>FileSystemLoader</span><span class=p>(</span><span class=n>searchpath</span><span class=o>=</span><span class=s2>"template"</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>tmp_env</span> <span class=o>=</span> <span class=n>jinja2</span><span class=o>.</span><span class=n>Environment</span><span class=p>(</span><span class=n>loader</span><span class=o>=</span><span class=n>_tmp_loader</span><span class=p>)</span>
</code></pre></div><p class=my-4>Như vậy template engine đã được khởi tạo, nó sẽ tìm các file trong thư mục <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">template</code> khi render.<h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=viet-app><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#viet-app> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Viết app</h3><div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=nd>@cherrypy</span><span class=o>.</span><span class=n>expose</span>
<span class=k>def</span> <span class=nf>index</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
    <span class=n>template</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>tmp_env</span><span class=o>.</span><span class=n>get_template</span><span class=p>(</span><span class=s2>"index.jinja"</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>template</span><span class=o>.</span><span class=n>render</span><span class=p>()</span>
</code></pre></div><p class=my-4>Đây là hàm <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">index</code>, nó sẽ nhận request khi truy cập vào địa URL <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">http://locahost:8080/</code> và trả về là nội dung đã được render của file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">index.jinja</code><p class=my-4>Jinja2 không yêu cầu tên file có chứa phần mở rộng như thế nào, nên ở đây tôi sử dụng tên file là <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">*.jinja</code>. Jinja2 cho phép kế thừa và module hóa các template, nên bạn có thể chia các file template thành các file nhỏ và thư mục giống như các template engine khác. Ở ứng dụng của tôi, tôi sẽ sử dụng 1 file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">layout.jinja</code> để xây dựng nên layout chính của trang Web, và các file khác ứng với các route khác, sẽ kế thừa file layout này và điền nội dung vào phần còn thiếu. Nội dung file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">layout.jinja</code> như sau:<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=cp>&lt;!DOCTYPE html></span>
<span class=p>&lt;</span><span class=nt>html</span><span class=p>></span>
  <span class=p>&lt;</span><span class=nt>head</span><span class=p>></span>
    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>"viewport"</span> <span class=na>content</span><span class=o>=</span><span class=s>"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span><span class=p>></span>
    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>http-equiv</span><span class=o>=</span><span class=s>"content-type"</span> <span class=na>content</span><span class=o>=</span><span class=s>"text/html; charset=UTF-8"</span><span class=p>></span>
    <span class=cm>&lt;!-- phần này sẽ load các file icon, js, css, và cá thẻ meta khác --></span>

    <span class=p>&lt;</span><span class=nt>title</span><span class=p>></span><span class=cp>{%</span> <span class=k>block</span> <span class=nv>title</span> <span class=cp>%}{%</span> <span class=k>endblock</span> <span class=cp>%}</span>
      - yunachan yeu
    <span class=p>&lt;/</span><span class=nt>title</span><span class=p>></span>
  <span class=p>&lt;/</span><span class=nt>head</span><span class=p>></span>

  <span class=p>&lt;</span><span class=nt>body</span><span class=p>></span>
    <span class=p>&lt;</span><span class=nt>nav</span><span class=p>></span>
      <span class=cm>&lt;!-- phần này sẽ là navbar --></span>
    <span class=p>&lt;/</span><span class=nt>nav</span><span class=p>></span>

    <span class=cp>{%</span> <span class=k>block</span> <span class=nv>content</span> <span class=cp>%}{%</span> <span class=k>endblock</span> <span class=cp>%}</span>

    <span class=p>&lt;</span><span class=nt>footer</span> <span class=na>class</span><span class=o>=</span><span class=s>"page-footer"</span><span class=p>></span>
      <span class=cm>&lt;!-- phần này là footer --></span>
    <span class=p>&lt;/</span><span class=nt>footer</span><span class=p>></span>
  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>></span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>></span>
</code></pre></div><p class=my-4>Trên đây là nội dung của file layout. File này đã định nghĩa trước các block, ví dụ <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">{% block content %}{% endblock %}</code> sẽ là phần nội dung chính của trang Web. Sau này khi kế thừa, các file khác sẽ điền nội dung vào block này. Tương tụ với các block khác. Nếu bạn sử dụng layout khác, bạn hoàn toàn có thể viết lại layout này, và define nhiều block hơn nếu bạn cần.<p class=my-4>Nội dung file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">index.jinja</code> như sau. File này sẽ kế thừa layout và điền nội dung vào content.<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=cp>{%</span> <span class=k>extends</span> <span class=s2>"layout.jinja"</span> <span class=cp>%}</span>

<span class=cp>{%</span> <span class=k>block</span> <span class=nv>title</span> <span class=cp>%}</span>Top page<span class=cp>{%</span> <span class=k>endblock</span> <span class=cp>%}</span>

<span class=cp>{%</span> <span class=k>block</span> <span class=nv>content</span> <span class=cp>%}</span>
<span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>"container"</span><span class=p>></span>
  <span class=cm>&lt;!-- phần này là nội dung cần điền --></span>
<span class=p>&lt;/</span><span class=nt>div</span><span class=p>></span>
<span class=cp>{%</span> <span class=k>endblock</span> <span class=cp>%}</span>
</code></pre></div><p class=my-4>Cú pháp của Jinja2 được giới thiệu rất cụ thể <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://jinja.pocoo.org/docs/dev/templates/ target=_blank>ở đây</a>. Bạn có thể đọc và tham khảo để sau này sử dụng cho project của bạn.<p class=my-4>Và với trang Web này, bạn thể sử dụng các CSS framework và các thư viện JavaScript để viết ứng dụng Web của mình trở nên sinh động và dễ sử dụng.<h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=thao-tac-voi-json><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#thao-tac-voi-json> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Thao tác với JSON</h3><p class=my-4>Khi lập trình Web, thường xuyên bạn sẽ gặp trường hợp server cần trả về kết quả kiểu JSON thay vì HTML truyền thống. Ví dụ như bạn lập trình API cho các ứng dụng di động hay đơn giản là trả kết quả cho request từ AJAX.<p class=my-4>CherryPy cho phép bạn thực hiện điều này dễ dàng nhờ có decorator <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">@cherypy.tools.json_out()</code>. Ví dụ như sau:<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=nd>@cherrypy</span><span class=o>.</span><span class=n>expose</span>
<span class=nd>@cherrypy</span><span class=o>.</span><span class=n>tools</span><span class=o>.</span><span class=n>json_out</span><span class=p>()</span>
<span class=k>def</span> <span class=nf>some_func</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>):</span>
    <span class=c1># Some process</span>
    <span class=k>return</span> <span class=p>{</span><span class=s2>"status"</span><span class=p>:</span> <span class=s2>"success"</span><span class=p>,</span> <span class=s2>"result"</span><span class=p>:</span> <span class=n>result</span><span class=p>}</span>
</code></pre></div><p class=my-4>Ví dụ với hàm trên, decorator <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">@cherrypy.expose</code> sẽ cho phép hàm <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">some_func</code> được truy cập thông qua các request HTTP, decorator <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">@cherypy.tools.json_out()</code> sẽ làm hàm trả kết quả là dữ liệu kiểu JSON thay vì HTML mặc định. Kết quả trả về của hàm phải là kiểu dict của Python, ví dụ <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">{"status": "success", "result": result}</code>, khi đó, server Web sẽ trả kết quả cho request là dữ liệu kiểu JSON, giống như <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">{status: success, result: result}</code> cùng với header của gói tin HTTP.<p class=my-4>Với decorator này, bạn có thể dễ dàng lập trình các API trả kết quả JSON dùng cho các ứng dụng đi động hay AJAX.<p class=my-4>CherryPy còn cung cấp 1 decorator nữa, đó là <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">@cherrypy.tools.json_in()</code>. Decorator này sẽ khiến hàm sẽ nhận tham số dầu vào là dữ liệu kiểu JSON thay vì request HTTP mặc định. Tuy nhiên cần lưu ý rằng, trong phát triển các Web thông thường, các submit từ form hay AJAX đều sử dụng các request HTTP thông thường (GET, POST, …) chứ ít khi gửi dữ liệu JSON. Trường hợp dữ liệu gửi đi là JSON ít gặp nên tôi sẽ không đi sâu ở đây. Nếu quan tâm, bạn có thể tham khảo ở docs của CherryPy.<h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=i18n-cho-jinja2><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#i18n-cho-jinja2> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>I18n cho Jinja2</h3><p class=my-4>Có 1 công cụ i18n được viết cho CherryPy ở <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://tools.cherrypy.org/wiki/LocalizationTranslation target=_blank>đây</a>. Tuy nhiên, đây là công cụ được viết cho CherryPy, tức là sẽ được dùng với các Web chỉ dùng CherryPy đơn thuần. Ở trong bài viết này, tôi sử dụng Jinja2 là template engine nên công cụ trên không sử dụng được.<p class=my-4>Jinja2 có hỗ trợ phần mở rộng i18n, bạn có thể tham khảo phần mở rộng này ở <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://jinja.pocoo.org/docs/dev/extensions/#i18n-extension target=_blank>đây</a>. Tài liệu viết rất đầy đủ những gì Jinja2 hỗ trợ. Tuy nhiên, họ không đưa ra ví dụ cụ thể cách sử dụng nên khá khó khăn với những người mới bắt đầu. Dưới đây, tôi sẽ giới thiệu chi tiết về i18n đối với Jinja2.<p class=my-4>Để sử dụng i18n, yêu cầu cần là phải có 1 translator, nó sẽ giúp dịch các đoạn text và Jinja2 sẽ tích hợp chúng vào HTML. Có thể sử dụng GNU gettext để làm translator. Tuy nhiên, tôi sẽ sử dụng babel, vì đơn giản, babel được viết cho Python nên dùng trong Python sẽ dễ dàng hơn. Thông tin về babel bạn có thể tham khảo ở <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://babel.pocoo.org target=_blank>đây</a>.<p class=my-4>Trước hết để sử dụng, bạn cần cài đặt babel<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span>babel
</code></pre></div><p class=my-4>Ở trong controller chính của app, bạn hãy khởi tạo i18n cho Jinja2 tương tự như sau (có thể khởi tạo trong hàm <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">__init__</code>)<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=kn>import</span> <span class=nn>babel.support</span>

<span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
    <span class=n>_tmp_loader</span> <span class=o>=</span> <span class=n>jinja2</span><span class=o>.</span><span class=n>FileSystemLoader</span><span class=p>(</span><span class=n>searchpath</span><span class=o>=</span><span class=s2>"template"</span><span class=p>)</span>
    <span class=n>translations</span> <span class=o>=</span> <span class=n>babel</span><span class=o>.</span><span class=n>support</span><span class=o>.</span><span class=n>Translations</span><span class=o>.</span><span class=n>load</span><span class=p>(</span>
        <span class=s2>"locale"</span><span class=p>,</span>
        <span class=p>[</span><span class=s2>"vi_VN"</span><span class=p>]</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>language</span> <span class=o>=</span> <span class=s2>"vi_VN"</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>tmp_env</span> <span class=o>=</span> <span class=n>jinja2</span><span class=o>.</span><span class=n>Environment</span><span class=p>(</span>
        <span class=n>loader</span><span class=o>=</span><span class=n>_tmp_loader</span><span class=p>,</span>
        <span class=n>extensions</span><span class=o>=</span><span class=p>[</span>
            <span class=s2>"jinja2.ext.i18n"</span><span class=p>,</span>
            <span class=s2>"jinja2.ext.autoescape"</span><span class=p>,</span>
            <span class=s2>"jinja2.ext.with_"</span>
        <span class=p>]</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>tmp_env</span><span class=o>.</span><span class=n>install_gettext_translations</span><span class=p>(</span><span class=n>translations</span><span class=p>)</span>
</code></pre></div><p class=my-4>Với khởi tạo như trên, Jinja2 sẽ tìm kiếm các file template trong thư mục <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">tempalte</code> và tìm cách file ngôn ngữ đã được dịch trong thư mục <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">locale</code>, ngôn ngữ được khởi tạo là <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">vi_VN</code>. Tất cả các khởi tạo này đều có thể thay đổi tùy theo nhu cầu và mục đích trang Web của bạn. Thậm chí, bạn có thể khởi tạo ngôn ngữ tùy theo setting hay IP của người dùng, nhằm giúp họ có được sự thoải mái khi truy cập trang Web của bạn.<p class=my-4>Đến đây, sau khi đã khởi tạo translator đầy đủ, bạn có thể sử dụng các thẻ <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">{% trans %}</code> trong file template. Với các thể này, Jinja2 sẽ biết thay thế bằng cách đoạn văn bản tương ứng với ngôn ngữ. Ví dụ.<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=p>&lt;</span><span class=nt>h1</span><span class=p>></span><span class=cp>{%</span> <span class=k>trans</span> <span class=cp>%}</span>hello<span class=cp>{%</span> <span class=k>endtrans</span> <span class=cp>%}</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>></span>
</code></pre></div><p class=my-4>Việc cần làm bây giờ là bạn cần định nghĩa các đoạn văn bản tương ứng với các thẻ <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">trans</code> trên. Với babel, công việc này khá là đơn giản. Babel sẽ giúp bạn đưa ra danh sách các cụm từ cần dịch một cách tự động. Trước hết bạn cần cầu hình cho babel<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=p>[</span><span class=n>jinja2</span><span class=p>:</span> <span class=o>**/</span><span class=n>template</span><span class=o>/**.</span><span class=n>jinja</span><span class=p>]</span>
<span class=n>encoding</span> <span class=o>=</span> <span class=n>utf</span><span class=o>-</span><span class=mi>8</span>
<span class=p>[</span><span class=n>python</span><span class=p>:</span> <span class=n>source</span><span class=o>/*.</span><span class=n>py</span><span class=p>]</span>
<span class=p>[</span><span class=n>extractors</span><span class=p>]</span>
<span class=n>jinja2</span> <span class=o>=</span> <span class=n>jinja2</span><span class=o>.</span><span class=n>ext</span><span class=p>:</span><span class=n>babel_extract</span>
</code></pre></div><p class=my-4>Với config trên, babel sẽ tìm thẻ <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">trans</code> ở tất cả các file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">.jinja</code> và file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">.py</code> và đưa ra danh sách các cụm từ cần dịch. Sau đó, bạn chạy lệnh dưới đây, babel sẽ tập hợp danh sách thành 1 file (lệnh này sẽ nhận config từ file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">./babel.cfg</code> và ghi kết quả ra file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">./locale/messages.pot</code>). Bạn có thể thay đổi đường dẫn của chúng nếu muốn.<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=gp>$ </span>pybabel<span class=w> </span>extract<span class=w> </span>-F<span class=w> </span>./babel.cfg<span class=w> </span>-o<span class=w> </span>./locale/messages.pot<span class=w> </span>./
</code></pre></div><p class=my-4>Bây giờ là đến công việc, gọi là địa phương hóa ngôn ngữ. Câu lệnh dưới đây sẽ khởi tạo ngôn ngữ <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">vi_VN</code>.<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=gp>$ </span>pybabel<span class=w> </span>init<span class=w> </span>-l<span class=w> </span>vi_VN<span class=w> </span>-d<span class=w> </span>./locale<span class=w> </span>-i<span class=w> </span>./locale/messages.pot
</code></pre></div><p class=my-4>Lệnh trên chỉ sử dụng khi khởi tạo, nếu đã từng khởi tạo rồi, thì chỉ cần update nội dung các file dịch với lệnh dưới đây (dùng lệnh trên cũng được nhưng nó sẽ xóa những gì bạn làm trước đó đi và bạn phải làm lại từ đầu):<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=gp>$ </span>pybabel<span class=w> </span>update<span class=w> </span>-l<span class=w> </span>vi_VN<span class=w> </span>-d<span class=w> </span>./locale<span class=w> </span>-i<span class=w> </span>./locale/messages.pot
</code></pre></div><p class=my-4>Các lệnh này sẽ cập nhật kết quả vào file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">locale\vi_VN\LC_MESSAGES\messages.po</code>. Ở file này, bạn cần quan tâm đến những thông tin tương tự như sau:<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=go>msgid: "hello"</span>
<span class=go>msgstr: ""</span>
</code></pre></div><p class=my-4><code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">msgid</code> là text bên trong thẻ <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">trans</code> và <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">msgstr</code> là đoạn text tương ứng trong ngôn ngữ cần dịch, ở đây là <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">vi_VN</code>. Việc cần làm lúc này là sửa file trên, thêm lời dịch cho đoạn văn bản. Ví dụ:<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=go>msgid: "hello"</span>
<span class=go>msgstr: "xin chào"</span>
</code></pre></div><p class=my-4>Vậy là đã xong, bây giờ bạn cần biên dịch file trên thành 1 file mà Jinja2 có thể hiểu và tích hợp vào HTML:<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=gp>$ </span>pybabel<span class=w> </span>compile<span class=w> </span>-f<span class=w> </span>-d<span class=w> </span>./locale
</code></pre></div><p class=my-4>Đến đây là đã hoàn thành công việc. Bây giờ, mỗi thẻ <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">trans</code> trên file template khi hiển thị sẽ được thay thế bằng đoạn văn tương ứng. Ví dụ<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=p>&lt;</span><span class=nt>h1</span><span class=p>></span><span class=cp>{%</span> <span class=k>trans</span> <span class=cp>%}</span>hello<span class=cp>{%</span> <span class=k>endtrans</span> <span class=cp>%}</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>></span>
</code></pre></div><p class=my-4>sẽ được thay bằng<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=p>&lt;</span><span class=nt>h1</span><span class=p>></span>xin chào<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>></span>
</code></pre></div><p class=my-4>như với ví dụ của tôi.<p class=my-4>Trên đây tôi chỉ nêu ra 1 ví dụ với ngôn ngữ <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">vi_VN</code>. Bạn có thể mở rộng với các ngôn ngữ khác. Jinja2 không giới hạn bạn có thể dùng bao nhiêu ngôn ngữ. Điều đó là tùy thuộc vào bạn.<h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=authentication><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#authentication> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Authentication</h3><p class=my-4>Nếu trên trang Web của bạn, có những nơi bạn muốn giới hạn với mọi người, chỉ một số người được quyền truy cập. Bạn có thể sử dụng Authentication. CherryPy cung cấp cả 2 hình thức authentication là Basic và Digest. Dưới đây tôi sẽ trình bày về cách sử dụng Digest authentication, Basic cũng tương tự như vậy. Để bảo vệ trong trang Web của bạn, rất đơn giản, hay thêm vào file config như sau (với trang web của tôi, config là <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">conf/app.conf</code>)<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=p>[</span><span class=o>/</span><span class=n>protected</span><span class=p>]</span>
<span class=n>tools</span><span class=o>.</span><span class=n>auth_digest</span><span class=o>.</span><span class=n>on</span><span class=p>:</span> <span class=kc>True</span>
<span class=n>tools</span><span class=o>.</span><span class=n>auth_digest</span><span class=o>.</span><span class=n>realm</span><span class=p>:</span> <span class=s2>"realm"</span>
<span class=n>tools</span><span class=o>.</span><span class=n>auth_digest</span><span class=o>.</span><span class=n>get_ha1</span><span class=p>:</span> <span class=n>cherrypy</span><span class=o>.</span><span class=n>lib</span><span class=o>.</span><span class=n>auth_digest</span><span class=o>.</span><span class=n>get_ha1_dict_plain</span><span class=p>({</span><span class=s2>"user"</span><span class=p>:</span> <span class=s2>"passwd"</span><span class=p>})</span>
<span class=n>tools</span><span class=o>.</span><span class=n>auth_digest</span><span class=o>.</span><span class=n>key</span><span class=p>:</span> <span class=s2>"a565c27146791cfb"</span>
</code></pre></div><p class=my-4>Với config như vậy thì khi truy cập <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">/protected</code> trang Web sẽ yêu cầu người dùng điền username và password để xác thực.<p class=my-4>CherryPy cho phép bạn có thể config authentication khác nhau với những đường dẫn khác nhau. Tuy nhiên, có 1 hạn chế là nếu nhiều đường dẫn có cùng authentication thì CherryPy không cung cấp config theo regex hay wildcard nên bạn sẽ phải copy paste những đoạn config giống nhau cho các đường dẫn khác nhau.<h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-3xl text-slate-900 dark:text-slate-100" id=su-dung-sqlalchemy-lam-orm><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#su-dung-sqlalchemy-lam-orm> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Sử dụng SQLAlchemy làm ORM</h2><p class=my-4>Như đã được giới thiệu, CherryPy là một Web server đơn thuần. Nó không cung cấp bất cứ một template engine nào cũng như ORM nào. Và chúng ta đã sử dụng Jinja2 làm template engine để phát triển Web. Ở phần này, tôi sẽ giới thiệu việc sử dụng SQLAlchemy làm ORM trong ứng dụng Web viết bằng CherryPy.<h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=gioi-thieu-sqlalchemy><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#gioi-thieu-sqlalchemy> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Giới thiệu SQLAlchemy</h3><p class=my-4>SQLAlchemy là một bộ công cụ SQL của Python và nó cũng là một ORM (Object Relational Mapper) cung cấp cho những người lập trình ứng dụng đầy đủ sức mạnh và sự mềm dẻo của SQL.<p class=my-4>Nó cung cấp một bộ đầy đủ các pattern nổi tiếng. Nó được thiết kế cho việc truy cập cơ sở dữ liệu hiệu quả và hiệu suất cao, đồng thời cho phép lập trình với phong cách Pythonic.<h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=tai-sao-lai-dung-sqlalchemy><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#tai-sao-lai-dung-sqlalchemy> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Tại sao lại dùng SQLALchemy</h3><p class=my-4>Thực ra, lần đầu tiên dữ dụng ORM cho Python, tôi đã sử dụng SQLAlchemy, lúc đầu nó cũng không dễ dùng cho lắm. Nhưng càng đi sâu tìm hiểu, tôi càng thấy nó thú vị. Nó có rất nhiều tính năng hay. Bạn có thể tham khảo ở <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://www.sqlalchemy.org/features.html target=_blank>đây</a>. Ngoài ra SQLAlchemy được sử dụng với rất nhiều hãng công nghệ nổi tiếng như Reddit, Mozilla. Thực sự nó quá đầy đủ và mạnh mẽ. Nó đủ tốt tới mức tôi không tìm thấy lý do gì để phải tìm kiếm một ORM tốt hơn nữa. Vì vậy tôi đã quyết định dùng SQLAlchemy.<h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-2xl text-slate-900 dark:text-slate-100" id=cai-at-vao-su-dung><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#cai-at-vao-su-dung> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Cài đặt vào sử dụng</h3><p class=my-4>Cài đặt SQLAlchemy rất đơn giản thông qua <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">pip</code>. Với virtualenv đã được kích hoạt, bạn có thể cài SQLAlchemy với lệnh sau:<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span>sqlalchemy
</code></pre></div><p class=my-4>Sau khi cài đặt, bạn có thể import nó giống như các package Python khác.<h4 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-xl text-slate-900 dark:text-slate-100" id=su-dung-sqlalchemy-lam-plugin-cho-cherrypy><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#su-dung-sqlalchemy-lam-plugin-cho-cherrypy> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Sử dụng SQLAlchemy làm plugin cho CherryPy</h4><p class=my-4>Sau khi tham khảo một vài nơi, có nhiều người đã viết các tool dùng để tích hợp SQLAlchemy vào CherryPy. Một ví dụ là ở <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://tools.cherrypy.org/wiki/SQLA target=_blank>đây</a>. Thường thì các tool này khá giống nhau. Và bạn có thể sử dụng bất cứ tool nào bạn thích. Tất nhiên, tôi chọn các tool có sẵn vì chúng rất đầy đủ và giúp chúng ta có thêm thời gian để tập trung vào phát triển app. Nếu muốn tìm hiểu sâu hơn cũng như muốn sử dụng tool của riêng mình, bạn hoàn toàn có thể tự phát triển nó, không sao cả. Dưới đây là tool tôi sử dụng. Tôi lưu nó trong file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">lib/tool/db.py</code><div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=kn>import</span> <span class=nn>cherrypy</span>

<span class=n>__all__</span> <span class=o>=</span> <span class=p>[</span><span class=s1>'SATool'</span><span class=p>]</span>

<span class=k>class</span> <span class=nc>SATool</span><span class=p>(</span><span class=n>cherrypy</span><span class=o>.</span><span class=n>Tool</span><span class=p>):</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>"""</span>
<span class=sd>        The SA tool is responsible for associating a SA session</span>
<span class=sd>        to the SA engine and attaching it to the current request.</span>
<span class=sd>        Since we are running in a multithreaded application,</span>
<span class=sd>        we use the scoped_session that will create a session</span>
<span class=sd>        on a per thread basis so that you don't worry about</span>
<span class=sd>        concurrency on the session object itself.</span>
<span class=sd>        This tools binds a session to the engine each time</span>
<span class=sd>        a requests starts and commits/rollbacks whenever</span>
<span class=sd>        the request terminates.</span>
<span class=sd>        """</span>
        <span class=n>cherrypy</span><span class=o>.</span><span class=n>Tool</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>'on_start_resource'</span><span class=p>,</span>
                               <span class=bp>self</span><span class=o>.</span><span class=n>bind_session</span><span class=p>,</span>
                               <span class=n>priority</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>_setup</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>cherrypy</span><span class=o>.</span><span class=n>Tool</span><span class=o>.</span><span class=n>_setup</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>hooks</span><span class=o>.</span><span class=n>attach</span><span class=p>(</span><span class=s1>'on_end_resource'</span><span class=p>,</span>
                                      <span class=bp>self</span><span class=o>.</span><span class=n>commit_transaction</span><span class=p>,</span>
                                      <span class=n>priority</span><span class=o>=</span><span class=mi>80</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>bind_session</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>"""</span>
<span class=sd>        Attaches a session to the request's scope by requesting</span>
<span class=sd>        the SA plugin to bind a session to the SA engine.</span>
<span class=sd>        """</span>
        <span class=n>session</span> <span class=o>=</span> <span class=n>cherrypy</span><span class=o>.</span><span class=n>engine</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=s1>'bind-session'</span><span class=p>)</span><span class=o>.</span><span class=n>pop</span><span class=p>()</span>
        <span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span> <span class=o>=</span> <span class=n>session</span>

    <span class=k>def</span> <span class=nf>commit_transaction</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>"""</span>
<span class=sd>        Commits the current transaction or rolls back</span>
<span class=sd>        if an error occurs.  Removes the session handle</span>
<span class=sd>        from the request's scope.</span>
<span class=sd>        """</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=p>,</span> <span class=s1>'db'</span><span class=p>):</span>
            <span class=k>return</span>
        <span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>cherrypy</span><span class=o>.</span><span class=n>engine</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=s1>'commit-session'</span><span class=p>)</span>
</code></pre></div><p class=my-4>Tool này cần 1 plugin cho CherryPy. Nội dung plugin như sau (<code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">lib/plugin/db_plugin.py</code>):<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=kn>import</span> <span class=nn>cherrypy</span>
<span class=kn>from</span> <span class=nn>cherrypy.process</span> <span class=kn>import</span> <span class=n>wspbus</span><span class=p>,</span> <span class=n>plugins</span>
<span class=kn>from</span> <span class=nn>sqlalchemy</span> <span class=kn>import</span> <span class=n>create_engine</span>
<span class=kn>from</span> <span class=nn>sqlalchemy.orm</span> <span class=kn>import</span> <span class=n>scoped_session</span><span class=p>,</span> <span class=n>sessionmaker</span>

<span class=kn>from</span> <span class=nn>lib.model</span> <span class=kn>import</span> <span class=n>ORBase</span>
<span class=kn>from</span> <span class=nn>conf</span> <span class=kn>import</span> <span class=n>db</span>

<span class=n>__all__</span> <span class=o>=</span> <span class=p>[</span><span class=s1>'SAEnginePlugin'</span><span class=p>]</span>

<span class=k>class</span> <span class=nc>SAEnginePlugin</span><span class=p>(</span><span class=n>plugins</span><span class=o>.</span><span class=n>SimplePlugin</span><span class=p>):</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>bus</span><span class=p>):</span>
<span class=w>        </span><span class=sd>"""</span>
<span class=sd>        The plugin is registered to the CherryPy engine and therefore</span>
<span class=sd>        is part of the bus (the engine *is* a bus) registery.</span>
<span class=sd>        We use this plugin to create the SA engine.  At the same time,</span>
<span class=sd>        when the plugin starts we create the tables into the database</span>
<span class=sd>        using the mapped class of the global metadata.</span>
<span class=sd>        """</span>
        <span class=n>plugins</span><span class=o>.</span><span class=n>SimplePlugin</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>bus</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>sa_engine</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>session</span> <span class=o>=</span> <span class=n>scoped_session</span><span class=p>(</span><span class=n>sessionmaker</span><span class=p>(</span><span class=n>autoflush</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
                                                   <span class=n>autocommit</span><span class=o>=</span><span class=kc>False</span><span class=p>))</span>

    <span class=k>def</span> <span class=nf>start</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>bus</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=s1>'Starting up DB access'</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>sa_engine</span> <span class=o>=</span> <span class=n>create_engine</span><span class=p>(</span><span class=n>db</span><span class=o>.</span><span class=n>url</span><span class=p>,</span> <span class=n>echo</span><span class=o>=</span><span class=n>db</span><span class=o>.</span><span class=n>echo</span><span class=p>)</span>
        <span class=c1>#TODO: Make this configurable</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>create_all</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>bus</span><span class=o>.</span><span class=n>subscribe</span><span class=p>(</span><span class=s2>"bind-session"</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>bind</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>bus</span><span class=o>.</span><span class=n>subscribe</span><span class=p>(</span><span class=s2>"commit-session"</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>commit</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>stop</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>bus</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=s1>'Stopping down DB access'</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>bus</span><span class=o>.</span><span class=n>unsubscribe</span><span class=p>(</span><span class=s2>"bind-session"</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>bind</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>bus</span><span class=o>.</span><span class=n>unsubscribe</span><span class=p>(</span><span class=s2>"commit-session"</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>commit</span><span class=p>)</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>sa_engine</span><span class=p>:</span>
            <span class=c1>#self.destroy_all()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>sa_engine</span><span class=o>.</span><span class=n>dispose</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>sa_engine</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span> <span class=nf>bind</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>"""</span>
<span class=sd>        Whenever this plugin receives the 'bind-session' command, it applies</span>
<span class=sd>        this method and to bind the current session to the engine.</span>
<span class=sd>        It then returns the session to the caller.</span>
<span class=sd>        """</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>configure</span><span class=p>(</span><span class=n>bind</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>sa_engine</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>session</span>

    <span class=k>def</span> <span class=nf>commit</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>"""</span>
<span class=sd>        Commits the current transaction or rollbacks if an error occurs.</span>
<span class=sd>        In all cases, the current session is unbound and therefore</span>
<span class=sd>        not usable any longer.</span>
<span class=sd>        """</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
        <span class=k>except</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>rollback</span><span class=p>()</span>
            <span class=k>raise</span>
        <span class=k>finally</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>remove</span><span class=p>()</span>

    <span class=k>def</span> <span class=nf>create_all</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>bus</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=s1>'Creating database'</span><span class=p>)</span>
        <span class=kn>from</span> <span class=nn>lib.model.user</span> <span class=kn>import</span> <span class=n>User</span>
        <span class=n>ORBase</span><span class=o>.</span><span class=n>metadata</span><span class=o>.</span><span class=n>create_all</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>sa_engine</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>destroy_all</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>bus</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=s1>'Destroying database'</span><span class=p>)</span>
        <span class=n>ORBase</span><span class=o>.</span><span class=n>metadata</span><span class=o>.</span><span class=n>drop_all</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>sa_engine</span><span class=p>)</span>
</code></pre></div><p class=my-4>Sau khi có tool trên rồi, bạn cần kích hoạt database cho CherryPy bằng config như sau (<code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">conf/app.conf</code>):<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=p>[</span><span class=o>/</span><span class=p>]</span>
<span class=n>tools</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>on</span><span class=p>:</span> <span class=kc>True</span>
</code></pre></div><p class=my-4>Và ở file <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">server.py</code>, bạn cần import và khởi tạo tool này.<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=kn>from</span> <span class=nn>lib.tool</span> <span class=kn>import</span> <span class=n>db</span>
<span class=kn>from</span> <span class=nn>lib.plugin</span> <span class=kn>import</span> <span class=n>db_plugin</span>

<span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
    <span class=n>engine</span> <span class=o>=</span> <span class=n>cherrypy</span><span class=o>.</span><span class=n>engine</span>
    <span class=n>cherrypy</span><span class=o>.</span><span class=n>tools</span><span class=o>.</span><span class=n>db</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>SATool</span><span class=p>()</span>
    <span class=n>engine</span><span class=o>.</span><span class=n>db</span> <span class=o>=</span> <span class=n>db_plugin</span><span class=o>.</span><span class=n>SAEngine</span><span class=p>(</span><span class=n>engine</span><span class=p>)</span>
    <span class=n>engine</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>subscribe</span><span class=p>()</span>
</code></pre></div><p class=my-4>Vậy là bạn đã có thể sử dụng SQLALchemy làm ORM như một plug in cho CherryPy. Bây giờ bạn có thể tạo các model và controller cho chúng.<h4 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-xl text-slate-900 dark:text-slate-100" id=tao-model><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#tao-model> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Tạo model</h4><p class=my-4>Tôi sẽ tạo các model trong thư mục <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">lib/model</code>. Trước hết, tôi khởi tạo những ORBase để sử dụng sau này<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=kn>from</span> <span class=nn>sqlalchemy.ext.declarative</span> <span class=kn>import</span> <span class=n>declarative_base</span>

<span class=n>__all__</span> <span class=o>=</span> <span class=p>[</span><span class=s2>"ORBase"</span><span class=p>]</span>

<span class=n>ORBase</span> <span class=o>=</span> <span class=n>declarative_base</span><span class=p>()</span>
</code></pre></div><p class=my-4>Bây giờ, thử tạo 1 model user như sau:<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=kn>import</span> <span class=nn>cherrypy</span>
<span class=kn>import</span> <span class=nn>sqlalchemy</span>
<span class=kn>from</span> <span class=nn>sqlalchemy</span> <span class=kn>import</span> <span class=n>Column</span><span class=p>,</span> <span class=n>UniqueConstraint</span><span class=p>,</span> <span class=n>Index</span>
<span class=kn>from</span> <span class=nn>sqlalchemy.types</span> <span class=kn>import</span> <span class=n>Integer</span><span class=p>,</span> <span class=n>String</span><span class=p>,</span> <span class=n>Boolean</span>

<span class=kn>from</span> <span class=nn>lib.model</span> <span class=kn>import</span> <span class=n>ORBase</span>

<span class=n>__all__</span> <span class=o>=</span> <span class=p>[</span><span class=s2>"User"</span><span class=p>]</span>


<span class=k>class</span> <span class=nc>User</span><span class=p>(</span><span class=n>ORBase</span><span class=p>):</span>
    <span class=n>__tablename__</span> <span class=o>=</span> <span class=s2>"users"</span>

    <span class=n>user_id</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Integer</span><span class=p>,</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=n>name</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
    <span class=n>fullname</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>50</span><span class=p>))</span>
    <span class=n>email</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>50</span><span class=p>))</span>
    <span class=n>password</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>128</span><span class=p>))</span>
    <span class=n>Index</span><span class=p>(</span><span class=n>user_id</span><span class=p>)</span>
</code></pre></div><p class=my-4>Với khởi tạo model user như trên, SQLAlchemy như tạo một table trên database là <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">users</code> với các trường được định nghĩa và đánh index cho trường <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">user_id</code>. Ngoài ra, trong file model này, bạn có thể định nghĩa các thuộc tính cũng như phương thức của model sau này chúng sẽ được sử dụng trên controller.<h4 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-xl text-slate-900 dark:text-slate-100" id=tuong-tac-voi-database><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#tuong-tac-voi-database> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Tương tác với database</h4><p class=my-4>Bây giờ, SQLAlchemy đã được plug vào CherryPy, nên bạn có thể thao tác các query với database thông qua <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">cherrypy.request.db</code>. Dưới đây, tôi sẽ giới thiệu một số thao tác cơ bản với database.<h5 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-lg text-slate-900 dark:text-slate-100" id=lay-cac-ban-ghi-tu-database><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#lay-cac-ban-ghi-tu-database> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Lấy các bản ghi từ database</h5><div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>User</span><span class=p>)</span>
</code></pre></div><p class=my-4>Nếu muốn thêm điều kiện nào đó, bạn có thể sử dụng thêm <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">filter</code>. Ví dụ<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>User</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>user_id</span> <span class=o>&lt;</span> <span class=mi>100</span><span class=p>)</span>
</code></pre></div><p class=my-4>Kết quả trả về của các câu query trên sẽ là object chứ danh sách các đối tượng tương ứng với các bản ghi trên database. Nếu muốn lấy bản ghi đầu tiên, bạn có thể thêm <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">.first()</code>.<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>User</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>user_id</span> <span class=o>&lt;</span> <span class=mi>100</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
</code></pre></div><p class=my-4>Nếu muốn sắp xếp, bạn có thể dùng <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">order_by</code>.<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>User</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>user_id</span> <span class=o>&lt;</span> <span class=mi>100</span><span class=p>)</span><span class=o>.</span><span class=n>order_by</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>name</span><span class=o>.</span><span class=n>desc</span><span class=p>())</span>
</code></pre></div><p class=my-4>Nếu muốn sử dụng các điều kiện phức tạp hơn, bạn có thể kết hợp chúng bằng các phép toán logic như <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">and_</code>, <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">or_</code>, <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">not_</code>…<h5 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-lg text-slate-900 dark:text-slate-100" id=them-ban-ghi-vao-database><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#them-ban-ghi-vao-database> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Thêm bản ghi vào database</h5><div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=c1># khởi tạo object ở đây</span>
<span class=n>new_user</span> <span class=o>=</span> <span class=n>User</span><span class=p>()</span>
<span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>new_user</span><span class=p>)</span>
<span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</code></pre></div><h5 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-lg text-slate-900 dark:text-slate-100" id=xoa-ban-ghi-khoi-database><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#xoa-ban-ghi-khoi-database> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Xóa bản ghi khỏi database</h5><div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=n>user</span> <span class=o>=</span> <span class=c1># lấy user từ database</span>
<span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
<span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</code></pre></div><h5 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-lg text-slate-900 dark:text-slate-100" id=update-ban-ghi-ang-co><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#update-ban-ghi-ang-co> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Update bản ghi đang có</h5><div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=n>user</span> <span class=o>=</span> <span class=c1># lấy user từ trong database.</span>
<span class=n>user</span><span class=o>.</span><span class=n>update</span><span class=p>()</span>
<span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
<span class=n>cherrypy</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</code></pre></div><p class=my-4>Như các bạn đã thấy, mọi thao tác với database đều kết thực với <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">cherrypy.request.db.commit()</code>. Thao tác này sẽ yêu cầu SQLAlchemy thao tác lệnh với database, trong khi các thao trước đó mới chỉ được lưu tạm thời. Nếu không có bước commit này, tất cả các thao tác trước đó sẽ không làm thay đổi database. SQLAlchemy không yêu cầu bạn phải commit từng thao tác của mình. Bạn có thể để một vài thay đổi được commit cùng 1 lúc cũng không sao cả. Điều đó phụ thuộc vào bạn và app của bạn.<p class=my-4>Nếu bạn không muốn phải thực hiện commit bằng tay như vậy, bạn có thể config cho SQLAlchemy tự động thực hiện điều đó, bằng cách sử dụng option <code class="bg-slate-100 p-0.5 dark:bg-slate-900 text-[90%]">autocommit=True</code> khi tạo session cho SQLAlchemy.<div class="chl my-4 p-4 bg-slate-100 dark:bg-slate-900 overflow-auto"><pre class=text-sm><code><span class=n>scoped_session</span><span class=p>(</span><span class=n>sessionmaker</span><span class=p>(</span><span class=n>autoflush</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>autocommit</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span>
</code></pre></div><p class=my-4>Các thông tin về SQLAlchemy bạn có thể xem thêm tại <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://www.sqlalchemy.org target=_blank>http://www.sqlalchemy.org</a>.<h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-3xl text-slate-900 dark:text-slate-100" id=demo><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#demo> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Demo</h2><p class=my-4>Bạn có thể xem một demo ở <a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://vpyeu-bank.herokuapp.com target=_blank>đây</a>.<p class=my-4>Đây là demo một trang Web đơn giản sử dụng các kiến thức trong bài viết này. Sử dụng Cherrypy, Jinja2 và SQLALchemy. Trang Web có thể chuyển đổi 2 ngôn ngữ Việt và Anh.<h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-3xl text-slate-900 dark:text-slate-100" id=ket-luan><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#ket-luan> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Kết luận</h2><p class=my-4>CherryPy cùng với Jinja2 và SQLALchemy tạo thành 1 bộ công cụ rất tốt để phát triển Web. Có thể nó hơi khó khăn khi mới bắt đầu. Nhưng sau khi tìm hiểu kỹ, tôi tìn rằng, bạn sẽ thích nó ngay. Và biết thêm framework mới, bạn có nhiều lựa chọn hơn khi muốn viết một trang Web cho riêng mình, và bạn sẽ tìm được framework thích hợ nhất. Chúc thành công.<h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-slate-100 dark:border-slate-700 text-3xl text-slate-900 dark:text-slate-100" id=tai-lieu-tham-khao><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" title="Permanent link" href=#tai-lieu-tham-khao> <svg class="size-4 inline-block" viewbox="0 0 24 24" fill=none height=16 stroke=currentColor width=16 xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg> </a>Tài liệu tham khảo</h2><ul class="list-[revert] ml-5"><li><a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://docs.cherrypy.org/en/latest/ target=_blank>CherryPy docs</a><li><a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://jinja.pocoo.org/docs/dev/ target=_blank>Jinja2 docs</a><li><a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://docs.sqlalchemy.org/en/rel_1_0/ target=_blank>SQLAlchemy docs</a><li><a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=https://bitbucket.org/Lawouach/twiseless/src target=_blank>Sample project</a><li><a class="text-crimson border-b border-dotted border-crimson hover:text-slate-600 hover:border-slate-600 dark:hover:text-slate-300 dark:hover:border-slate-300" rel="noopener noreferrer" href=http://babel.pocoo.org/docs/ target=_blank>Babel docs</a></ul></div><div class="mt-8 text-sm leading-relaxed"><svg class="inline size-4" viewbox="0 0 24 24" fill=none stroke=currentColor xmlns=http://www.w3.org/2000/svg><path d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" stroke-linecap=round stroke-linejoin=round stroke-width=2 /></svg><a class="text-crimson hover:text-slate-600 cursor-pointer dark:hover:text-slate-300" href=https://manhhomienbienthuy.github.io/tag/python.html> #Python </a><a class="text-crimson hover:text-slate-600 cursor-pointer dark:hover:text-slate-300" href=https://manhhomienbienthuy.github.io/tag/cherrypy.html> #Cherrypy </a><a class="text-crimson hover:text-slate-600 cursor-pointer dark:hover:text-slate-300" href=https://manhhomienbienthuy.github.io/tag/jinja2.html> #Jinja2 </a><a class="text-crimson hover:text-slate-600 cursor-pointer dark:hover:text-slate-300" href=https://manhhomienbienthuy.github.io/tag/sqlalchemy.html> #SQLAlchemy </a><a class="text-crimson hover:text-slate-600 cursor-pointer dark:hover:text-slate-300" href=https://manhhomienbienthuy.github.io/tag/web.html> #Web </a></div></div><div class="flex justify-between items-center my-10 text-sm"><div class="grow text-left"><a class="p-2 text-white bg-crimson" href=https://manhhomienbienthuy.github.io/2015/09/30/hash-length-extension-attacks.html> <svg class="inline size-4" viewbox="0 2 24 24" fill=none stroke=currentColor xmlns=http://www.w3.org/2000/svg><path d="M10 19l-7-7m0 0l7-7m-7 7h18" stroke-linecap=round stroke-linejoin=round stroke-width=2 /></svg> Bài viết sau </a></div><div class="grow text-right"><a class="p-2 text-white bg-crimson" href=https://manhhomienbienthuy.github.io/2015/07/30/ksnctf-write-up.html> Bài viết trước <svg class="inline size-4" viewbox="0 2 24 24" fill=none stroke=currentColor xmlns=http://www.w3.org/2000/svg><path d="M14 5l7 7m0 0l-7 7m7-7H3" stroke-linecap=round stroke-linejoin=round stroke-width=2 /></svg> </a></div></div><div class="mb-8 p-8 text-justify bg-white shadow-lg dark:bg-slate-800"><p class="mb-2 italic leading-relaxed">Tôi xin lỗi nếu bài viết có bất kỳ typo nào. Nếu bạn nhận thấy điều gì bất thường, xin hãy cho tôi biết.<p class="mb-8 leading-relaxed">Nếu có bất điều gì muốn nói, bạn có thể liên hệ với tôi qua các mạng xã hội, tạo discussion hoặc report issue trên Github.<div class="flex justify-between mb-4 text-slate-900 dark:text-slate-100"><a rel="noopener noreferrer" href=https://x.com/_naa_4f target=_blank> <svg viewbox="0 0 16 16" class=size-6 fill=currentColor xmlns=http://www.w3.org/2000/svg><title>X</title><path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"/></svg> </a><a rel="noopener noreferrer" href=https://www.linkedin.com/in/manhhomienbienthuy target=_blank> <svg viewbox="0 0 16 16" class=size-6 fill=currentColor xmlns=http://www.w3.org/2000/svg><title>LinkedIn</title><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg> </a><a rel="noopener noreferrer" href=https://www.facebook.com/manhhomienbienthuy target=_blank> <svg viewbox="0 0 16 16" class=size-6 fill=currentColor xmlns=http://www.w3.org/2000/svg><title>Facebook</title><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/></svg> </a><a rel="noopener noreferrer" href=https://github.com/manhhomienbienthuy target=_blank> <svg viewbox="0 0 16 16" class=size-6 fill=currentColor xmlns=http://www.w3.org/2000/svg><title>Github</title><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg> </a><a rel="noopener noreferrer" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/discussions target=_blank> <svg viewbox="0 0 24 24" class=size-6 fill=none stroke=currentColor xmlns=http://www.w3.org/2000/svg><title>Discussion</title><path d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z" stroke-linecap=round stroke-linejoin=round stroke-width=2 /></svg> </a><a rel="noopener noreferrer" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/issues target=_blank> <svg viewbox="0 0 16 16" class=size-6 fill=currentColor xmlns=http://www.w3.org/2000/svg><title>Issue</title><path d="M4.355.522a.5.5 0 0 1 .623.333l.291.956A4.979 4.979 0 0 1 8 1c1.007 0 1.946.298 2.731.811l.29-.956a.5.5 0 1 1 .957.29l-.41 1.352A4.985 4.985 0 0 1 13 6h.5a.5.5 0 0 0 .5-.5V5a.5.5 0 0 1 1 0v.5A1.5 1.5 0 0 1 13.5 7H13v1h1.5a.5.5 0 0 1 0 1H13v1h.5a1.5 1.5 0 0 1 1.5 1.5v.5a.5.5 0 1 1-1 0v-.5a.5.5 0 0 0-.5-.5H13a5 5 0 0 1-10 0h-.5a.5.5 0 0 0-.5.5v.5a.5.5 0 1 1-1 0v-.5A1.5 1.5 0 0 1 2.5 10H3V9H1.5a.5.5 0 0 1 0-1H3V7h-.5A1.5 1.5 0 0 1 1 5.5V5a.5.5 0 0 1 1 0v.5a.5.5 0 0 0 .5.5H3c0-1.364.547-2.601 1.432-3.503l-.41-1.352a.5.5 0 0 1 .333-.623zM4 7v4a4 4 0 0 0 3.5 3.97V7H4zm4.5 0v7.97A4 4 0 0 0 12 11V7H8.5zM12 6a3.989 3.989 0 0 0-1.334-2.982A3.983 3.983 0 0 0 8 2a3.983 3.983 0 0 0-2.667 1.018A3.989 3.989 0 0 0 4 6h8z"/></svg> </a></div></div></div><div class="md:col-span-2 shrink-0 p-6 bg-white text-sm leading-relaxed shadow-[0_2px_20px_-10px_#000] dark:bg-slate-800"><h2 class="mb-2 font-semibold text-slate-900 uppercase dark:text-slate-100 after:block after:h-px after:w-8 after:mb-4 after:bg-slate-900 after:shadow-heading dark:after:bg-slate-100 dark:after:shadow-heading-dark">Welcome</h2><img class="w-3/4 mx-auto mb-4 rounded-full" alt=manhhomienbienthuy height=262 src=https://manhhomienbienthuy.github.io/meow.webp width=262><p class="mb-10 text-center">Đây là thế giới của manhhomienbienthuy (naa). Chào mừng đến với thế giới của tôi!<h2 class="mb-2 font-semibold text-slate-900 uppercase dark:text-slate-100 after:block after:h-px after:w-8 after:mb-4 after:bg-slate-900 after:shadow-heading dark:after:bg-slate-100 dark:after:shadow-heading-dark">Bài viết liên quan</h2><div class="mb-10 divide-y divide-slate-100 dark:divide-slate-700"><div class="flex items-center gap-2 py-6"><a class="shrink-0 size-16 shadow-sm" href=https://manhhomienbienthuy.github.io/2016/11/23/vai-lo-hong-thuong-gap-va-cach-phong-chong-trong-django.html> <img alt="Vài lỗ hổng thường gặp và cách phòng chống trong Django" class="size-full p-1 object-cover" decoding=async height=64 loading=lazy src=https://cdn.pixabay.com/photo/2014/02/13/07/28/security-265130_640.jpg width=64> </a><a href=https://manhhomienbienthuy.github.io/2016/11/23/vai-lo-hong-thuong-gap-va-cach-phong-chong-trong-django.html> Vài lỗ hổng thường gặp và cách phòng chống trong Django </a></div><div class="flex items-center gap-2 py-6"><a class="shrink-0 size-16 shadow-sm" href=https://manhhomienbienthuy.github.io/2016/01/11/ky-thuat-scraping-va-crawling-nang-cao-voi-scrapy-va-sqlalchemy.html> <img alt="Kỹ thuật scraping và crawling nâng cao với Scrapy và SQLAlchemy" class="size-full p-1 object-cover" decoding=async height=64 loading=lazy src=https://cdn.pixabay.com/photo/2017/01/18/16/35/crab-1990198_640.jpg width=64> </a><a href=https://manhhomienbienthuy.github.io/2016/01/11/ky-thuat-scraping-va-crawling-nang-cao-voi-scrapy-va-sqlalchemy.html> Kỹ thuật scraping và crawling nâng cao với Scrapy và SQLAlchemy </a></div><div class="flex items-center gap-2 py-6"><a class="shrink-0 size-16 shadow-sm" href=https://manhhomienbienthuy.github.io/2015/12/11/web-scraping-va-crawling-voi-scrapy-va-sqlalchemy.html> <img alt="Web scraping và crawling với Scrapy và SQLAlchemy" class="size-full p-1 object-cover" decoding=async height=64 loading=lazy src=https://cdn.pixabay.com/photo/2017/01/18/16/35/crab-1990198_640.jpg width=64> </a><a href=https://manhhomienbienthuy.github.io/2015/12/11/web-scraping-va-crawling-voi-scrapy-va-sqlalchemy.html> Web scraping và crawling với Scrapy và SQLAlchemy </a></div><div class="flex items-center gap-2 py-6"><a class="shrink-0 size-16 shadow-sm" href=https://manhhomienbienthuy.github.io/2025/05/14/hieu-ve-meta-programming.html> <img alt="Hiểu về meta programming" class="size-full p-1 object-cover" src="https://images.unsplash.com/photo-1541701494587-cb58502866ab?ixlib=rb-4.1.0&q=85&fm=webp&crop=entropy&cs=srgb&w=640" decoding=async height=64 loading=lazy width=64> </a><a href=https://manhhomienbienthuy.github.io/2025/05/14/hieu-ve-meta-programming.html> Hiểu về meta programming </a></div><div class="flex items-center gap-2 py-6"><a class="shrink-0 size-16 shadow-sm" href=https://manhhomienbienthuy.github.io/2023/11/30/lambda-trong-python.html> <img alt="Lambda trong Python" class="size-full p-1 object-cover" src="https://images.unsplash.com/photo-1597589827703-f4b68eafa0ce?ixlib=rb-4.0.3&q=85&fm=webp&crop=entropy&cs=srgb&w=640" decoding=async height=64 loading=lazy width=64> </a><a href=https://manhhomienbienthuy.github.io/2023/11/30/lambda-trong-python.html> Lambda trong Python </a></div></div><h2 class="mb-2 font-semibold text-slate-900 uppercase dark:text-slate-100 after:block after:h-px after:w-8 after:mb-4 after:bg-slate-900 after:shadow-heading dark:after:bg-slate-100 dark:after:shadow-heading-dark">Bài viết mới</h2><div class="mb-10 divide-y divide-slate-100 dark:divide-slate-700"><div class="flex items-center gap-2 py-6"><a class="shrink-0 size-16 shadow-[0_0_10px_-5px_#000]" href=https://manhhomienbienthuy.github.io/2025/05/14/hieu-ve-meta-programming.html> <img alt="Hiểu về meta programming" class="size-full p-1 object-cover" src="https://images.unsplash.com/photo-1541701494587-cb58502866ab?ixlib=rb-4.1.0&q=85&fm=webp&crop=entropy&cs=srgb&w=640" decoding=async height=64 loading=lazy width=64> </a><a href=https://manhhomienbienthuy.github.io/2025/05/14/hieu-ve-meta-programming.html> Hiểu về meta programming </a></div><div class="flex items-center gap-2 py-6"><a class="shrink-0 size-16 shadow-[0_0_10px_-5px_#000]" href=https://manhhomienbienthuy.github.io/2025/04/01/bff-backends-for-frontends.html> <img alt="BFF: Backends For Frontends" class="size-full p-1 object-cover" src="https://images.unsplash.com/photo-1509644851169-2acc08aa25b5?ixlib=rb-4.0.3&q=85&fm=webp&crop=entropy&cs=srgb&w=640" decoding=async height=64 loading=lazy width=64> </a><a href=https://manhhomienbienthuy.github.io/2025/04/01/bff-backends-for-frontends.html> BFF: Backends For Frontends </a></div><div class="flex items-center gap-2 py-6"><a class="shrink-0 size-16 shadow-[0_0_10px_-5px_#000]" href=https://manhhomienbienthuy.github.io/2025/03/05/gioi-han-bo-nho-trong-nodejs.html> <img alt="Giới hạn bộ nhớ trong Node.js" class="size-full p-1 object-cover" src="https://images.unsplash.com/photo-1490879112094-281fea0883dc?ixlib=rb-4.0.3&q=85&fm=webp&crop=entropy&cs=srgb&w=640" decoding=async height=64 loading=lazy width=64> </a><a href=https://manhhomienbienthuy.github.io/2025/03/05/gioi-han-bo-nho-trong-nodejs.html> Giới hạn bộ nhớ trong Node.js </a></div><div class="flex items-center gap-2 py-6"><a class="shrink-0 size-16 shadow-[0_0_10px_-5px_#000]" href=https://manhhomienbienthuy.github.io/2024/10/25/linux-3-lenh-quan-trong-de-xu-ly-du-lieu-text.html> <img alt="Linux: 3 lệnh quan trọng để xử lý dữ liệu text" class="size-full p-1 object-cover" src="https://images.pexels.com/photos/207580/pexels-photo-207580.jpeg?cs=srgb&fm=webp&w=1920&h=960" decoding=async height=64 loading=lazy width=64> </a><a href=https://manhhomienbienthuy.github.io/2024/10/25/linux-3-lenh-quan-trong-de-xu-ly-du-lieu-text.html> Linux: 3 lệnh quan trọng để xử lý dữ liệu text </a></div><div class="flex items-center gap-2 py-6"><a class="shrink-0 size-16 shadow-[0_0_10px_-5px_#000]" href=https://manhhomienbienthuy.github.io/2024/07/12/bash-thuc-thi-lenh-co-chua-dau-cach-duoc-luu-trong-bien.html> <img alt="Bash: thực thi lệnh có chứa dấu cách được lưu trong biến" class="size-full p-1 object-cover" src="https://images.unsplash.com/photo-1634328946235-42a1dd99a0bf?ixlib=rb-4.0.3&q=85&fm=webp&crop=entropy&cs=srgb&w=640" decoding=async height=64 loading=lazy width=64> </a><a href=https://manhhomienbienthuy.github.io/2024/07/12/bash-thuc-thi-lenh-co-chua-dau-cach-duoc-luu-trong-bien.html> Bash: thực thi lệnh có chứa dấu cách được lưu trong biến </a></div></div><h2 class="mb-2 font-semibold text-slate-900 uppercase dark:text-slate-100 after:block after:h-px after:w-8 after:mb-4 after:bg-slate-900 after:shadow-heading dark:after:bg-slate-100 dark:after:shadow-heading-dark">Chuyên mục</h2><div class="flex flex-wrap gap-2 mb-10 text-xs dark:border-slate-100"><a class="py-1 px-2 text-white uppercase bg-crimson" href=https://manhhomienbienthuy.github.io/category/cuoc-song.html> Cuộc sống </a><a class="py-1 px-2 text-white uppercase bg-crimson" href=https://manhhomienbienthuy.github.io/category/du-lich.html> Du lịch </a><a class="py-1 px-2 text-white uppercase bg-crimson" href=https://manhhomienbienthuy.github.io/category/lap-trinh.html> Lập trình </a><a class="py-1 px-2 text-white uppercase bg-crimson" href=https://manhhomienbienthuy.github.io/category/tong-hop.html> Tổng hợp </a></div><h2 class="mb-2 font-semibold text-slate-900 uppercase dark:text-slate-100 after:block after:h-px after:w-8 after:mb-4 after:bg-slate-900 after:shadow-heading dark:after:bg-slate-100 dark:after:shadow-heading-dark">Lưu trữ theo năm</h2><div class="flex flex-wrap gap-[0.57rem] mb-10 text-xs"><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2025/> 2025 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2024/> 2024 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2023/> 2023 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2022/> 2022 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2021/> 2021 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2020/> 2020 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2019/> 2019 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2018/> 2018 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2017/> 2017 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2016/> 2016 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2015/> 2015 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2014/> 2014 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2013/> 2013 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2012/> 2012 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2011/> 2011 </a><a class="py-1 w-10 text-white text-center bg-crimson" href=https://manhhomienbienthuy.github.io/2010/> 2010 </a></div><h2 class="mb-2 font-semibold text-slate-900 uppercase dark:text-slate-100 after:block after:h-px after:w-8 after:mb-4 after:bg-slate-900 after:shadow-heading dark:after:bg-slate-100 dark:after:shadow-heading-dark">Thông tin liên hệ</h2><p class="mb-8 text-justify">Cảm ơn bạn đã quan tâm blog của tôi. Nếu có bất điều gì muốn nói, bạn có thể liên hệ với tôi qua các mạng xã hội, tạo discussion hoặc report issue trên Github.<div class="flex justify-between mb-8 text-slate-900 dark:text-slate-100"><a rel="noopener noreferrer" href=https://x.com/_naa_4f target=_blank> <svg viewbox="0 0 16 16" class=size-6 fill=currentColor xmlns=http://www.w3.org/2000/svg><title>X</title><path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"/></svg> </a><a rel="noopener noreferrer" href=https://www.linkedin.com/in/manhhomienbienthuy target=_blank> <svg viewbox="0 0 16 16" class=size-6 fill=currentColor xmlns=http://www.w3.org/2000/svg><title>LinkedIn</title><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg> </a><a rel="noopener noreferrer" href=https://www.facebook.com/manhhomienbienthuy target=_blank> <svg viewbox="0 0 16 16" class=size-6 fill=currentColor xmlns=http://www.w3.org/2000/svg><title>Facebook</title><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/></svg> </a><a rel="noopener noreferrer" href=https://github.com/manhhomienbienthuy target=_blank> <svg viewbox="0 0 16 16" class=size-6 fill=currentColor xmlns=http://www.w3.org/2000/svg><title>Github</title><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg> </a><a rel="noopener noreferrer" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/discussions target=_blank> <svg viewbox="0 0 24 24" class=size-6 fill=none stroke=currentColor xmlns=http://www.w3.org/2000/svg><title>Discussion</title><path d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z" stroke-linecap=round stroke-linejoin=round stroke-width=2 /></svg> </a><a rel="noopener noreferrer" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/issues target=_blank> <svg viewbox="0 0 16 16" class=size-6 fill=currentColor xmlns=http://www.w3.org/2000/svg><title>Issue</title><path d="M4.355.522a.5.5 0 0 1 .623.333l.291.956A4.979 4.979 0 0 1 8 1c1.007 0 1.946.298 2.731.811l.29-.956a.5.5 0 1 1 .957.29l-.41 1.352A4.985 4.985 0 0 1 13 6h.5a.5.5 0 0 0 .5-.5V5a.5.5 0 0 1 1 0v.5A1.5 1.5 0 0 1 13.5 7H13v1h1.5a.5.5 0 0 1 0 1H13v1h.5a1.5 1.5 0 0 1 1.5 1.5v.5a.5.5 0 1 1-1 0v-.5a.5.5 0 0 0-.5-.5H13a5 5 0 0 1-10 0h-.5a.5.5 0 0 0-.5.5v.5a.5.5 0 1 1-1 0v-.5A1.5 1.5 0 0 1 2.5 10H3V9H1.5a.5.5 0 0 1 0-1H3V7h-.5A1.5 1.5 0 0 1 1 5.5V5a.5.5 0 0 1 1 0v.5a.5.5 0 0 0 .5.5H3c0-1.364.547-2.601 1.432-3.503l-.41-1.352a.5.5 0 0 1 .333-.623zM4 7v4a4 4 0 0 0 3.5 3.97V7H4zm4.5 0v7.97A4 4 0 0 0 12 11V7H8.5zM12 6a3.989 3.989 0 0 0-1.334-2.982A3.983 3.983 0 0 0 8 2a3.983 3.983 0 0 0-2.667 1.018A3.989 3.989 0 0 0 4 6h8z"/></svg> </a></div></div></div></main><footer class="mt-8 text-white"><div class=bg-slate-800><div class="grid grid-cols-1 md:grid-cols-3 md:gap-8 container mx-auto px-4 leading-loose text-justify"><div class=py-8><a href=https://manhhomienbienthuy.github.io title=manhhomienbienthuy> <svg class="w-full h-auto text-white" viewbox="0 0 1000 165" fill=currentColor height=165 version=1.0 width=1000 xmlns=http://www.w3.org/2000/svg><path d="M651.5 14.7c-10.4 1-11.6 1.4-11 3.3.9 2.9-1.2 7-17.6 34.2-8.4 13.9-17.6 30.2-20.4 36.3-3.5 7.4-6.7 12.4-9.6 15.4-6.1 6.1-13.9 9.2-13.9 5.6 0-2.6 4.7-11 12.7-22.8C600.3 74 602 70.5 602 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C500.2 71 505.5 60.6 504.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.2-3.6 4.8-2 6.7-19.5 35.4-25 41.1-5.1 5.1-8.7 6.6-9.8 3.8-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8c13.2-20.9 20.3-29.9 25.2-31.7 7-2.7 5.7 3-5 21-7.7 12.9-11.6 21.6-11.6 25.8 0 2 5.5 7.2 7.7 7.2 3.9 0 9.5-2.2 13.8-5.5 2.5-1.9 4.7-3.5 5-3.5s.5 1.3.5 2.8c0 1.7 1 3.8 2.5 5.2 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-5 7.7-10 15.9-11.2 18.2-2.7 5.4-2.9 11.8-.4 14.6 4.4 4.8 16.5 1.1 25.6-8l4.8-4.8.6 3.8c1.3 8.3 8.3 12.4 17.3 10.2 18.5-4.6 39.3-28 39.3-44.3 0-14-8.6-18.8-20-11.1-5.5 3.7-5.5 3.7-3.6.8 5.6-8.5 23.6-41 24.1-43.6.8-3.7 0-4.6-4-4.2zM542.6 62.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zm101 3c1.9 7.8-15.7 39.6-25.6 46.3-2.2 1.4-4.6 2.2-6.5 2-2.6-.3-3-.7-3.3-3.6-.8-8.1 8.8-27.5 19.7-39.5 7-7.8 14.4-10.2 15.7-5.2zM821 16c-1.1 1.1-2 2.7-2 3.5 0 2.1-5.3 12.5-9.7 19.2l-3.6 5.3h-5.8c-5.6 0-5.9.1-5.9 2.4 0 2.2.5 2.5 4.4 2.8l4.4.3-11 18c-6 9.9-13 22-15.4 27-4.7 9.9-7.3 13-12.1 15.1-4.2 1.8-6.3 1.8-6.3-.1 0-2.6 4.7-11 12.7-22.8C779.3 74 781 70.5 781 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C679.2 71 684.5 60.6 683.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.3-3.6 4.9-.7 2.2-4.9 10-9.3 17.3-10.4 17-12.9 22.7-12.9 28.8 0 3.8.5 5.2 2.5 7.1 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 10.4 11 11.4 23.4 2l3.5-2.7.8 3c2.1 8.2 12.3 8.2 22.8 0 4.4-3.5 5.6-3.7 3.5-.7-3.1 4.4-2.2 5.8 3.7 5.8 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-9.8 15.5-12.8 21.7-12.8 26.5 0 4.4 3.3 7.9 7.6 7.9 4.5 0 12.6-4.5 18.6-10.3l5.4-5.2-.4 5.2c-.5 6.3 1.3 9.8 5.7 10.8s9.5-1.7 17.1-9.1l6.9-6.6-.2 5.5c-.2 4.2.3 6 1.7 7.6 2.8 3.1 8.3 2.8 13.2-.7l3.9-2.8 2 3c1.1 1.6 3.1 3.3 4.5 3.6 3.8 1 11.1-1.5 15.8-5.5 2.3-2 4.2-3.4 4.2-3.1 0 1.2-10.4 19.3-13.5 23.6-4.7 6.4-14.3 15.4-19.3 17.9-4.7 2.4-10.9 2.7-13.7.8-1.6-1.2-1.6-1.8-.7-4.7 1.6-4.4 1.5-5.6-.4-7.4-3.8-3.8-10.4.2-10.4 6.3 0 11 18.9 13.3 36.9 4.5 11.2-5.5 20.6-15.4 29.7-31.4 3.9-6.9 10.6-18.4 14.9-25.5 16.8-28.2 19.1-32.6 18-34.5-.4-.6-3.5-1-7.1-1-5.3 0-6.6.3-7 1.7-.8 2.9-12.5 25.4-16.1 31.2-6.9 10.8-18.9 21.2-22.8 19.7-2.8-1 1.4-11 11-26.7 7.3-11.8 12.7-22.8 12.1-24.5-.6-1.5-4.4-1.8-9.5-.8-2.7.6-3.6 1.5-5.5 5.8-1.3 2.8-5.8 10.6-10 17.4-7.7 12.2-12.6 21.5-12.6 23.9 0 1.7-4.6 4.6-6 3.8-3.2-2 .2-11 10.4-27.8 7.7-12.8 11.5-20.1 11.6-22.5 0-.8-1.4-1.2-4.2-1.1-9.3.3-9.7.6-13.8 10.2-6.6 15.4-24.1 39.3-30.4 41.7-2.9 1-4.6.2-4.6-2.4 0-1.2 3.9-8.7 8.6-16.7C900 63.4 901.8 58 894.5 58c-6.7 0-9.5 1.1-10 3.9-2.4 12.1-24.9 42.1-34.6 46.1-7.4 3.1-5.5-3.2 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-1-1.2-2.4-1.5-6.1-1-6.7.9-7.5 1.4-8.3 4.4-.3 1.5-2.3 5.6-4.5 9.2-2.1 3.6-7.5 13-12 21-28.3 50.1-35.9 60.5-43.8 59.8-5-.4-5.2-2.6-1.2-12.1 3.3-8.1 16.2-30.6 24.2-42.5l4.9-7.2h5.4c5.2 0 5.5-.1 5.5-2.5 0-2.3-.4-2.5-4-2.5-2.2 0-4-.2-4-.6 0-.3 1.8-3.2 4-6.4 5-7.4 11-18.9 11-21.3 0-2.7-12.2-2.5-15 .3zm-99.4 46.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zM271.5 16.5c-.5.2-2.2.6-3.7.9-1.6.4-2.8 1.2-2.8 1.9 0 1.7-2.4 6.2-12.9 24.7-18.8 33.1-33.6 57.7-36.5 60.9-4.7 5.1-12.6 8-12.6 4.6 0-2.6 4.7-11 12.7-22.8C224.3 74 226 70.5 226 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 5.5-20.8 38.1-29.4 46-4.8 4.4-7 5.2-7.9 2.8-1-2.5 1-7.5 7.2-18 8.4-14.3 18.1-31.8 18.1-32.8 0-.4-2.9-.8-6.5-.8s-6.5.4-6.5.8c0 .5-.6 1.6-1.3 2.6-1.3 1.8-1.5 1.7-4.1-.9-2.4-2.4-3.4-2.7-7-2.3-13.6 1.6-31.1 16.8-39.7 34.5-5.8 11.8-16.5 21-18.5 15.9-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8C79.6 74.8 86.7 65.8 91.6 64c7-2.7 5.7 3-5 21C78.9 97.9 75 106.6 75 110.8c0 .7 1.4 2.7 3 4.4 2.8 2.7 3.5 3 7.1 2.4 5.4-.9 9.2-2.9 14.4-7.7l4.3-3.9.7 3.6c.3 2.1 2 5 3.6 6.7 2.5 2.5 3.6 2.9 6.4 2.4 3.8-.6 9.8-4.5 16.4-10.6 2.4-2.3 4.5-4.1 4.7-4.1s.4 2.2.4 5c0 6.2 2.7 9.6 6.8 8.5 3.5-.9 8.2-3.1 11.1-5.2 2.4-1.7 2.4-1.7 1.3.4-2.1 3.8-1.5 4.3 5.1 4.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 8.3 7.1 10.9 16.7 6 4.4-2.2 4.7-2.2 4.7-.5 0 1.6.8 1.9 5.3 1.9 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.4 21.3-15.4 27.6-10.3 32.4 4.2 3.9 12 1.6 22.4-6.7l3.5-2.8-2.7 4c-4.2 6.2-3.7 7.5 2.6 7.5 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.3 21.1-15.4 27.6-10.5 32.2 4.5 4.3 12 2 22.5-6.7 5.6-4.7 6.2-5 6.2-2.9 0 3.7 3.4 8.3 7.6 10.3 14.4 7 36.7-6.2 47.5-28 4-8 4.4-9.5 4.4-16.1 0-6.3-.3-7.6-2.4-9.8-8.4-8.9-26.6-4-42.2 11.5-6.3 6.2-8.5 9.2-12.2 17-3.4 7.1-5.7 10.3-9.1 13.1-5.7 4.8-9.3 6.5-10.7 5.1-1.6-1.6 1.6-8.1 10.1-20.8 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-2-2.4-13.9-.7-13.9 2S293.2 74.5 284 88c-5 7.3-16 18.3-20.1 20-7.4 3.1-5.6-3.1 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13-21.5 16.4-28.5 14.8-30.5-1.1-1.4-4.9-1.9-7.5-1zM151.8 62.2c3.2 3.2-.1 12.6-10.1 28.1-8.9 13.8-16.1 20.7-21.6 20.7-2.7 0-4.4-3.4-3.5-7.3 2.3-11.1 21.5-37.5 29.9-41.3 3.7-1.7 3.8-1.7 5.3-.2zm232 0c3.5 3.5-1 17.8-9.8 31.1-10.1 15.4-20.3 22.2-25.5 17-6.8-6.7 12.9-39 29-47.6 3.7-2 4.7-2.1 6.3-.5z"/><path d="M505.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8zM684.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8z"/></svg> </a><div class="flex items-center mb-4 gap-4"><img class="size-16 rounded-full" alt=manhhomienbienthuy height=56 src=https://manhhomienbienthuy.github.io/meow.webp width=56><p>manhhomienbienthuy | naa<br> salaried coder</div></div><div class=py-8><p class=mb-4>Trang web này được viết bằng tất cả ♥ và tinh thần của tôi, dành tặng cho yunachan – tình yêu của tôi.<p class=mb-4>Mã HTML được built bởi Pelican, sử dụng Python-Markdown, Pygments và nhiều công cụ khác.<p class=mb-4>Nội dung trang web này được cấp phép theo giấy phép <a rel="noopener noreferrer" class=font-bold href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a>. Mã nguồn được cấp phép theo giấy phép <a rel="noopener noreferrer" class=font-bold href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/blob/main/LICENSE target=_blank>MIT License</a>.</div><div class=py-8><p class=mb-4>Nhiều bài viết của tôi được thực hiện từ lâu, nội dung của chúng có thể đã lỗi thời. Suy nghĩ của tôi nhiều khi đã thay đổi và tôi có thể sẽ tiếp cận theo cách khác nếu viết bài vào thời điểm hiện tại. Dù vậy, tôi ít khi sửa lại nội dung bài viết cũ mà chỉ sữa lỗi typo. Nếu nội dung có gì cập nhật, tôi sẽ chú thích trong bài.</div></div></div><div class=bg-slate-900><div class="flex flex-wrap justify-between container mx-auto px-4"><div class="pt-4 md:py-4">Copyright © 2010–2025 <a class=font-bold href=https://manhhomienbienthuy.github.io/pages/gioi-thieu.html> manhhomienbienthuy </a></div><div class="grow py-4 text-right divide-x"><a class=px-2 href=https://manhhomienbienthuy.github.io> Trang chủ </a><a class=px-2 href=https://manhhomienbienthuy.github.io/pages/gioi-thieu.html> Giới thiệu </a><a class=px-2 href=https://manhhomienbienthuy.github.io/pages/computer-info.html> Computer Info </a></div></div></div></footer><script defer src=https://manhhomienbienthuy.github.io/theme/js/app.js></script>